{"version":3,"sources":["axiosInstance.js","redux/actions/messages.js","redux/actions/types.js","redux/actions/errors.js","redux/actions/polls.js","components/AlertTemplate.js","components/AlertSystem.js","components/polls/ChoiceItem.js","components/polls/ChoiceList.js","components/polls/PollItem.js","components/polls/PollList.js","components/Home.js","components/Navbar.js","components/Login.js","redux/actions/auth.js","components/Logout.js","components/Register.js","redux/actions/users.js","components/ProfilePicChanger.js","components/Tooltip.js","components/UserProfile.js","components/ProtectedRoute.js","redux/actions/comments.js","components/polls/CommentForm.js","components/polls/LikeComment.js","components/polls/DislikeComment.js","components/polls/CommentItem.js","components/polls/CommentList.js","components/polls/LikePoll.js","components/polls/DislikePoll.js","components/Modal.js","components/polls/PollDetail.js","components/polls/NewPollForm.js","App.js","redux/reducers/polls.js","redux/reducers/comments.js","redux/reducers/auth.js","redux/reducers/users.js","redux/reducers/messages.js","redux/reducers/errors.js","redux/reducers/rootReducer.js","redux/store.js","serviceWorker.js","index.js"],"names":["baseURL","axiosInstance","axios","create","timeout","headers","localStorage","getItem","interceptors","response","use","error","originalRequest","config","status","url","window","location","href","Promise","reject","data","code","statusText","refreshToken","tokenParts","JSON","parse","atob","split","now","Math","ceil","Date","console","log","exp","post","refresh","then","setItem","access","defaults","catch","createMessage","message","type","payload","getErrors","errors","setPollLikesAndDislikes","polls","getUserVotes","userId","dispatch","get","getUserLikes","getUserDislikes","alertStyle","backgroundColor","fontSize","color","padding","borderRadius","display","textAlign","justifyContent","alignItems","boxShadow","width","boxSizing","buttonStyle","marginLeft","border","cursor","successIcon","errorIcon","AlertTemplate","style","options","close","onClick","AlertSystem","prevProps","this","props","alert","username","password","email","detail","question_text","choices","comment_text","loginSuccess","success","registerSuccess","pollCreated","pollDeleted","Fragment","React","Component","connect","state","messages","withAlert","ChoiceItem","handleVote","choiceId","choice","id","pollId","history","choice_text","percent","vote","className","data-label","getState","auth","user","isAuthenticated","selected_choice_id","user_id","logInFirst","push","withRouter","ChoiceList","map","key","PollItem","nextProps","nextState","poll","question","datePosted","date_posted","totalComments","total_comments","author","totalVotes","i","length","votes","to","moment","fromNow","float","toLocaleString","ownProps","users","find","userVotes","some","PollList","forEach","Card","Home","welcomeMsg","undefined","UncontrolledAlert","div","animate","opacity","y","exit","transition","pageTransition","useState","isOpen","setIsOpen","toggle","loggedInNavbar","NavbarToggler","Collapse","navbar","loggedOutNavbar","Login","handleSubmit","event","preventDefault","handleLogin","handleChange","inputName","target","name","inputValue","value","setState","prevState","newState","initial","x","Row","Col","sm","md","size","offset","Form","method","onSubmit","FormGroup","placeholder","onChange","margin","Logout","handleLogout","removeItem","Register","handleRegistration","autoComplete","newUser","ProfilePicChanger","uploadImage","for","customUpload","Tooltip","text","tooltip-text","children","UserProfile","image","files","formData","FormData","append","match","params","put","totalPolls","userPolls","totalRenown","index","likes","dislikes","userProfile","lg","src","overflow","loggedInUser","userStatsContainer","date_joined","format","pollStatsContainer","marginRight","filter","ProtectedRoute","component","render","setCommentLikesAndDislikes","comments","CommentForm","comment","handleComment","addComment","poll_id","LikeComment","handleClick","toggleLike","commentLiked","totalCommentLikes","DislikeComment","toggleDislike","commentDisliked","CommentItem","commentId","toggleCommentLike","toggleCommentDislike","commentTextFont","commentBtnContainer","fontFamily","fontWeight","position","bottom","parseInt","commentsLikeCounters","commentsDislikeCounters","commentsLiked","commentsDisliked","patch","signal","CommentList","getComments","getUserCommentLikes","getUserCommentDislikes","userCommentLikes","userCommentDislikes","LikePoll","pollLiked","DislikePoll","pollDisliked","Modal","closeModal","showModal","PollDetail","togglePollLike","togglePollDislike","deletePoll","getNextPollId","findIndex","e","getPreviousPollId","deletePollBtn","choicesContainer","pageTransitionLeftBtn","pageTransitionRightBtn","xs","right","top","left","pollsLikeCounters","pollsDislikeCounters","pollsLiked","pollsDisliked","delete","NewPollForm","addPoll","handleQuestion","handleChoices","addChoice","concat","removeChoice","splice","field","maxLength","positions","BOTTOM_CENTER","transitions","SCALE","App","getPolls","getUsers","verifyCurrentUser","template","Container","Navbar","exitBeforeEnter","pathname","exact","path","initialState","combineReducers","action","reduce","rest","like","dislike","middleware","thunk","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","Boolean","hostname","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.624b7ae5.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseURL = 'http://localhost:8000/api/';\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: baseURL,\r\n  timeout: 5000, \r\n  headers: {\r\n    'Authorization' : localStorage.getItem('accessToken') ? \"Bearer \" + localStorage.getItem('accessToken') : null,\r\n    'Content-Type' : 'application/json',\r\n    'Accept' : 'application/json'\r\n  }\r\n})\r\n\r\naxiosInstance.interceptors.response.use(\r\n  response => response, \r\n  error => {\r\n    const originalRequest = error.config;\r\n\r\n    if (error.response.status === 401 && originalRequest.url === baseURL + 'token/refresh/') {\r\n      window.location.href = '/login';\r\n      return Promise.reject(error)\r\n    }\r\n\r\n    if (error.response.data.code === \"token_not_valid\" && \r\n        error.response.status === 401 &&\r\n        error.response.statusText === \"Unauthorized\") {\r\n\r\n      const refreshToken = localStorage.getItem('refreshToken');\r\n\r\n      if (refreshToken) {\r\n        const tokenParts = JSON.parse(atob(refreshToken.split('.')[1]))\r\n\r\n        const now = Math.ceil(Date.now() / 1000);\r\n        console.log(tokenParts.exp)\r\n        console.log(now)\r\n\r\n        if (tokenParts.exp > now) {\r\n          return axiosInstance\r\n            .post('/token/refresh/', { refresh: refreshToken })\r\n            .then(response => {\r\n              localStorage.setItem('accessToken', response.data.access);\r\n              localStorage.setItem('refreshToken', response.data.refresh);\r\n\r\n              axiosInstance.defaults.headers['Authorization'] = \"Bearer \" + response.data.access;\r\n              originalRequest.headers['Authorization'] = \"Bearer \" + response.data.access;\r\n\r\n              return axiosInstance(originalRequest);\r\n            })\r\n            .catch(error => {\r\n              console.log(error)\r\n            }); \r\n\r\n        } else {\r\n            console.log(\"Refresh token is expired\", tokenParts.exp, now);\r\n            window.location.href = '/login';\r\n        }\r\n      } else {\r\n        console.log(\"Refresh token not available. Log back in!\");\r\n        window.location.href = '/login'\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error)\r\n  }\r\n);\r\n\r\nexport default axiosInstance; ","import { CREATE_MESSAGE } from './types'\r\n\r\nexport const createMessage = message => {\r\n  return {\r\n    type: CREATE_MESSAGE,\r\n    payload: message\r\n  }\r\n}","\r\n// polls\r\nexport const GET_POLLS = \"GET_POLLS\";\r\nexport const DELETE_POLL = \"DELETE_POLL\";\r\nexport const ADD_POLL = \"ADD_POLL\";\r\nexport const SET_POLL_LIKES_AND_DISLIKES = \"SET_POLL_LIKES_AND_DISLIKES\";\r\nexport const HANDLE_VOTE = \"HANDLE_VOTE\";\r\nexport const GET_USER_VOTES = \"GET_USER_VOTES\";\r\nexport const GET_USER_LIKES = \"GET_USER_LIKES\";\r\nexport const GET_USER_DISLIKES = \"GET_USER_DISLIKES\";\r\nexport const REMOVE_USER_VOTES = \"REMOVE_USER_VOTES\";\r\nexport const REMOVE_USER_LIKES = \"REMOVE_USER_LIKES\";\r\nexport const REMOVE_USER_DISLIKES = \"REMOVE_USER_DISLIKES\";\r\nexport const INCREMENT_POLL_LIKES = \"INCREMENT_POLL_LIKES\";\r\nexport const DECREMENT_POLL_LIKES = \"DECREMENT_POLL_LIKES\";\r\nexport const INCREMENT_POLL_DISLIKES = \"INCREMENT_POLL_DISLIKES\";\r\nexport const DECREMENT_POLL_DISLIKES = \"DECREMENT_POLL_DISLIKES\"\r\n\r\n\r\n// comments\r\nexport const GET_COMMENTS = \"GET_COMMENTS\";\r\nexport const ADD_COMMENT = \"ADD_COMMENT\";\r\nexport const SET_COMMENT_LIKES_AND_DISLIKES = \"SET_COMMENT_LIKES_AND_DISLIKES\";\r\nexport const GET_USER_COMMENT_LIKES = \"GET_USER_COMMENT_LIKES\";\r\nexport const GET_USER_COMMENT_DISLIKES = \"GET_USER_COMMENT_DISLIKES\";\r\nexport const INCREMENT_COMMENT_LIKES = \"INCREMENT_COMMENT_LIKES\";\r\nexport const DECREMENT_COMMENT_LIKES = \"DECREMENT_COMMENT_LIKES\";\r\nexport const INCREMENT_COMMENT_DISLIKES = \"INCREMENT_COMMENT_DISLIKES\";\r\nexport const DECREMENT_COMMENT_DISLIKES = \"DECREMENT_COMMENT_DISLIKES\"\r\n\r\n\r\n// auth\r\nexport const USER_AUTHENTICATED = \"USER_AUTHENTICATED\";\r\nexport const HANDLE_LOGIN = \"HANDLE_LOGIN\";\r\nexport const HANDLE_LOGOUT = \"HANDLE_LOGOUT\";\r\n\r\n// errors \r\nexport const GET_ERRORS = \"GET_ERRORS\"\r\n\r\n// alerts\r\nexport const CREATE_MESSAGE = \"CREATE_MESSAGE\"\r\n\r\n// users \r\nexport const GET_USERS = \"GET_USERS\"\r\nexport const ADD_NEW_USER = \"ADD_NEW_USER\"","import { GET_ERRORS } from './types'\r\n\r\nexport const getErrors = errors => {\r\n  return {\r\n    type: GET_ERRORS,\r\n    payload: errors\r\n  }\r\n}","import axios from \"axios\";\r\nimport axiosInstance from '../../axiosInstance'\r\nimport { createMessage } from './messages';\r\nimport { getErrors } from './errors'\r\nimport { \r\n  GET_POLLS, \r\n  DELETE_POLL, \r\n  ADD_POLL, \r\n  HANDLE_VOTE, \r\n  GET_USER_VOTES,\r\n  GET_USER_LIKES,\r\n  GET_USER_DISLIKES,\r\n  INCREMENT_POLL_LIKES,\r\n  DECREMENT_POLL_LIKES,\r\n  INCREMENT_POLL_DISLIKES,\r\n  DECREMENT_POLL_DISLIKES,\r\n  SET_POLL_LIKES_AND_DISLIKES,\r\n  GET_ERRORS\r\n} from \"./types\";\r\n\r\nconst setPollLikesAndDislikes = polls => {\r\n  return { \r\n    type: SET_POLL_LIKES_AND_DISLIKES,\r\n    payload: polls \r\n  }\r\n}\r\n\r\nexport const getPolls = () => (dispatch, getState) => {\r\n  axios.get('http://localhost:8000/api/polls/')\r\n    .then(response => {\r\n      dispatch({\r\n        type: GET_POLLS,\r\n        payload: response.data\r\n      })\r\n\r\n      const { polls } = getState().polls\r\n      dispatch(setPollLikesAndDislikes(polls))\r\n\r\n    }).catch(error => console.log(error))\r\n}\r\n\r\nexport const deletePoll = (pollId, history) => dispatch => {\r\n  axiosInstance.delete(`/polls/${pollId}/`)\r\n    .then(response => {\r\n      history.push('/')\r\n      dispatch(createMessage({ pollDeleted: \"Poll deleted!\"}))\r\n      dispatch({\r\n        type: DELETE_POLL,\r\n        payload: pollId\r\n      })\r\n      \r\n    }).catch(error => console.log(error))\r\n}\r\n\r\nexport const addPoll = (data, history) => (dispatch, getState) => {\r\n  const { id: userId } = getState().auth.user\r\n  axiosInstance.post('http://localhost:8000/api/polls/', {\r\n    author: userId,\r\n    question_text: data.question,\r\n    choices: data.choices\r\n  })\r\n    .then(response => {\r\n      dispatch(createMessage({ pollCreated: \"Poll created successfully!\"}))\r\n      dispatch({\r\n        type: ADD_POLL,\r\n        payload: response.data\r\n      })\r\n      history.push('/')\r\n      const { polls } = getState().polls\r\n      dispatch(setPollLikesAndDislikes(polls))\r\n    })\r\n\r\n    .catch(error => dispatch(getErrors(error.response)))\r\n}\r\n\r\nexport const handleVote = (choiceId, pollId, history) => (dispatch, getState) => {\r\n  const { user, isAuthenticated } = getState().auth\r\n\r\n  if (isAuthenticated === true) {\r\n    axiosInstance.post(`/polls/${pollId}/votes/`, {\r\n    selected_choice_id: choiceId,\r\n    user_id: user.id\r\n  })\r\n    .then(response => {\r\n      dispatch({\r\n        type: HANDLE_VOTE,\r\n        payload: response.data\r\n      })\r\n\r\n    }).catch(error => console.log(error)) \r\n       \r\n  } else {\r\n    dispatch(createMessage({ logInFirst: \"You must log in to vote!\"}))\r\n    history.push('/login')\r\n  }  \r\n}\r\n\r\nexport const getUserVotes = userId => dispatch => {\r\n  axios.get(`http://localhost:8000/api/users/${userId}/votes/`)\r\n    .then(response => {\r\n      dispatch({\r\n        type: GET_USER_VOTES,\r\n        payload: response.data\r\n      })\r\n\r\n    }).catch(error => console.log(error))\r\n}\r\n\r\nexport const getUserLikes = userId => dispatch => {\r\n  axios.get(`http://localhost:8000/api/users/${userId}/likes/`)\r\n    .then(response => {\r\n      dispatch({\r\n        type: GET_USER_LIKES,\r\n        payload: response.data\r\n      })\r\n    })\r\n}\r\n\r\nexport const getUserDislikes = userId => dispatch => {\r\n  axios.get(`http://localhost:8000/api/users/${userId}/dislikes/`)\r\n    .then(response => {\r\n      dispatch({\r\n        type: GET_USER_DISLIKES,\r\n        payload: response.data\r\n      })\r\n    })\r\n}\r\n\r\nexport const togglePollLike = pollId => (dispatch, getState) => {\r\n  const { id: userId } = getState().auth.user\r\n  const { \r\n    pollsLiked, \r\n    pollsDisliked, \r\n    pollsLikeCounters, \r\n    pollsDislikeCounters \r\n  } = getState().polls\r\n\r\n  const pollLiked = pollsLiked[pollId];\r\n  const pollDisliked = pollsDisliked[pollId]\r\n\r\n  if (pollLiked === undefined && pollDisliked === undefined) {\r\n    axiosInstance.patch(`/polls/${pollId}/likes/`, {\r\n      signal: 'add like',\r\n      user_id: userId,\r\n      likes: pollsLikeCounters[pollId] + 1, \r\n    })\r\n      .then(response => console.log(response.data))\r\n\r\n    dispatch({ \r\n      type: INCREMENT_POLL_LIKES, \r\n      payload: pollId\r\n    })    \r\n  }\r\n\r\n  if (pollLiked === true && pollDisliked === undefined) {\r\n    axiosInstance.patch(`/polls/${pollId}/likes/`, {\r\n      signal: 'remove like',\r\n      user_id: userId,\r\n      likes: pollsLikeCounters[pollId] - 1,\r\n    })\r\n      .then(response => console.log(response.data)) \r\n\r\n    dispatch({ \r\n      type: DECREMENT_POLL_LIKES, \r\n      payload: pollId \r\n    })    \r\n  }\r\n\r\n  if (pollLiked === undefined && pollDisliked === true) {\r\n    axiosInstance.patch(`/polls/${pollId}/likes/`, {\r\n      signal: 'add like, remove dislike',\r\n      user_id: userId,\r\n      likes: pollsLikeCounters[pollId] + 1, \r\n      dislikes: pollsDislikeCounters[pollId] - 1, \r\n    })\r\n      .then(response => console.log(response.data))\r\n\r\n    dispatch({ \r\n      type: INCREMENT_POLL_LIKES, \r\n      payload: pollId \r\n    })\r\n    dispatch({ \r\n      type: DECREMENT_POLL_DISLIKES,\r\n      payload: pollId\r\n    })\r\n  }\r\n}\r\n\r\nexport const togglePollDislike = pollId => (dispatch, getState) => {\r\n  const { id: userId } = getState().auth.user\r\n  const { \r\n    pollsLiked, \r\n    pollsDisliked, \r\n    pollsLikeCounters, \r\n    pollsDislikeCounters \r\n  } = getState().polls\r\n\r\n  const pollLiked = pollsLiked[pollId];\r\n  const pollDisliked = pollsDisliked[pollId]\r\n  \r\n  if (pollLiked === undefined && pollDisliked === undefined) {\r\n    axiosInstance.patch(`/polls/${pollId}/dislikes/`, {\r\n      signal: 'add dislike',\r\n      user_id: userId,\r\n      dislikes: pollsDislikeCounters[pollId] + 1\r\n    })\r\n      .then(response => console.log(response.data))\r\n\r\n    dispatch({ \r\n      type: INCREMENT_POLL_DISLIKES,\r\n      payload: pollId\r\n    })\r\n  }\r\n\r\n  if (pollLiked === undefined && pollDisliked === true) {\r\n    axiosInstance.patch(`/polls/${pollId}/dislikes/`, {\r\n      signal: 'remove dislike',\r\n      user_id: userId,\r\n      dislikes: pollsDislikeCounters[pollId] - 1\r\n    })\r\n      .then(response => console.log(response.data))\r\n\r\n    dispatch({ \r\n      type: DECREMENT_POLL_DISLIKES, \r\n      payload: pollId \r\n    }) \r\n  }\r\n\r\n  if (pollLiked === true && pollDisliked === undefined) {\r\n    axiosInstance.patch(`/polls/${pollId}/dislikes/`, {\r\n      signal: 'add dislike, remove like',\r\n      user_id: userId,\r\n      dislikes: pollsDislikeCounters[pollId] + 1,\r\n      likes: pollsLikeCounters[pollId] - 1,\r\n    })\r\n      .then(response => console.log(response.data))\r\n\r\n    dispatch({ \r\n      type: DECREMENT_POLL_LIKES,\r\n      payload: pollId \r\n    })\r\n    dispatch({ \r\n      type: INCREMENT_POLL_DISLIKES, \r\n      payload: pollId\r\n    })\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { BsCheckBox } from 'react-icons/bs'\r\nimport { MdErrorOutline } from 'react-icons/md'\r\n\r\nconst alertStyle = {\r\n  backgroundColor: '#1f2120',\r\n  fontSize: '14px',\r\n  color: '#e1e1e1',\r\n  padding:' 10px',\r\n  borderRadius: '3px',\r\n  display: 'flex',\r\n  textAlign: 'center',\r\n  justifyContent: 'space-between',\r\n  alignItems: 'center',\r\n  boxShadow: '3px 3px 8px black',\r\n  width: '500px',\r\n  boxSizing: 'border-box'\r\n}\r\n\r\nconst buttonStyle = {\r\n  marginLeft: '10px',\r\n  border: 'none',\r\n  backgroundColor: 'transparent',\r\n  cursor: 'pointer',\r\n  color: '#FFFFFF'\r\n}\r\n\r\nconst successIcon = {\r\n  fontSize: '30px',\r\n  color: '#5bd0de'\r\n}\r\n\r\nconst errorIcon = {\r\n  fontSize: '30px',\r\n  color: 'red'\r\n}\r\n\r\nconst AlertTemplate = ({ style, options, message, close }) => (\r\n  <div style={{...alertStyle, ...style }}>\r\n    {options.type === 'info' && '!'}\r\n    {options.type === 'success' && <BsCheckBox style={ successIcon }/> }\r\n    {options.type === 'error' && <MdErrorOutline style={ errorIcon }/> }\r\n    <span style={{ marginLeft: '10px' }}> {message} </span>\r\n    <button onClick={close} style={buttonStyle}>x</button>\r\n  </div>\r\n)\r\n\r\n\r\n\r\nexport default AlertTemplate","import React from 'react'\r\nimport { withAlert } from 'react-alert'\r\nimport { connect } from 'react-redux';\r\n\r\nclass AlertSystem extends React.Component {\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { error, message, alert } = this.props\r\n    if (error !== prevProps.error) {\r\n      if (error.message.username) {\r\n        alert.error(`Username: ${error.message.username}`)\r\n      } if (error.message.password) {\r\n        alert.error(`Password: ${error.message.password}`)\r\n      } if (error.message.email) {\r\n        alert.error(`Email: ${error.message.email}`)\r\n      } if (error.message.detail) {\r\n        alert.error('Username and/or password is incorrect!')\r\n      } if (error.message.question_text) {\r\n        alert.error('Question field is empty!')\r\n      } if (error.message.choices) {\r\n        alert.error('Answer fields are empty!')\r\n      } if (error.message.comment_text) {\r\n        alert.error('Comment field is empty!')\r\n      }\r\n    }\r\n\r\n    if (message !== prevProps.message) {\r\n      if (message.loginSuccess) {\r\n        alert.success(message.loginSuccess)\r\n      } if (message.registerSuccess) {\r\n        alert.success(message.registerSuccess)\r\n      } if (message.pollCreated) {\r\n        alert.success(message.pollCreated)\r\n      } if (message.pollDeleted) {\r\n        alert.success(message.pollDeleted)\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment></React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    error: state.errors,\r\n    message: state.messages\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps) (withAlert()(AlertSystem))","import React from 'react'\r\nimport './ChoiceItem.css'\r\nimport { connect } from 'react-redux';\r\nimport { handleVote } from '../../redux/actions/polls';\r\nimport { withRouter } from 'react-router';\r\n\r\nclass ChoiceItem extends React.Component {\r\n  \r\n  handleVote = () => {\r\n    const { id: choiceId } = this.props.choice;\r\n    const { pollId, history } = this.props;\r\n    this.props.handleVote(choiceId, pollId, history)\r\n  }\r\n\r\n\trender() {\r\n\t\tconst { choice_text, percent } = this.props.choice \r\n\r\n\t\treturn (\r\n\t\t\t<div \r\n        style={{ border: this.props.vote ? '0px' : '2px solid #943dff' }}\r\n        className={`choice-btn ${ this.props.vote ? \"\" : \"choice-btn-hover\"}`} \r\n        data-label={ choice_text }\r\n        onClick={ this.handleVote }\r\n      >\r\n\t\t\t\t<span style={{ width: this.props.vote ? `${ percent }%` : '' }} className=\"bar\"></span>\r\n  \t\t\t<p className=\"percent\">{ this.props.vote ? `${ percent }%` : '' }</p>    \r\n\t\t\t</div>\t\t\t \r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default connect(null, { handleVote }) (withRouter(ChoiceItem))","import React from 'react'\r\nimport ChoiceItem from './ChoiceItem'\r\n\r\nclass ChoiceList extends React.Component {\r\n\trender() {\r\n\t\treturn this.props.choices.map(choice => (\r\n\t\t\t<ChoiceItem \r\n        key={ choice.id } \r\n        choice={ choice } \r\n        pollId={ this.props.pollId }\r\n        vote={ this.props.vote }\r\n      />\r\n\t\t))\r\n  \r\n\t}\r\n}\r\n\r\n\r\nexport default ChoiceList","import React from 'react'\r\nimport moment from 'moment';\r\nimport { Link } from 'react-router-dom';\r\nimport { GoCommentDiscussion } from 'react-icons/go';\r\nimport { connect } from 'react-redux';\r\nimport ChoiceList from './ChoiceList';\r\n\r\nclass PollItem extends React.Component {\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (this.props.vote !== nextProps.vote) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.vote !== prevProps.vote) {\r\n      console.log(`Poll ${ this.props.poll.id } updated!`)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      question_text: question,\r\n      date_posted: datePosted,\r\n      total_comments: totalComments,\r\n      author,\r\n      id\r\n    } = this.props.poll;\r\n\r\n    // calculate total votes from each choice\r\n    const { choices } = this.props.poll;\r\n    let totalVotes = 0;\r\n    for (let i=0; i < choices.length; i++) {\r\n      totalVotes += choices[i].votes\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"article-metadata\">\r\n          <small className=\"text-muted\">posted by</small>\r\n          <Link to={`/users/${ this.props.user.username }`} className=\"pl-1\">{ author }</Link>\r\n          <small className=\"pl-2 text-muted\">\r\n            { moment( datePosted ).fromNow() }\r\n          </small>\r\n        </div>\r\n\r\n        <h1>\r\n          <Link to={ `/polls/${id}` }>{ question }</Link>\r\n        </h1>\r\n        <ChoiceList\r\n          pollId={ id } \r\n          choices={ this.props.poll.choices } \r\n          vote={ this.props.vote } \r\n        />\r\n\r\n        <div style={{ float: 'left' }}>\r\n          <small>Total Votes: { totalVotes }</small>\r\n        </div>\r\n        <div style={{ float: 'right' }}>\r\n          <Link className=\"mr-2\" to={`/polls/${id}`}>\r\n            <GoCommentDiscussion/>\r\n          </Link>\r\n          <small>{ totalComments.toLocaleString() }</small>\r\n        </div> \r\n      </React.Fragment>\r\n      \r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n  user: state.users.users.find(user => user.username === ownProps.poll.author),\r\n  vote: state.polls.userVotes.some(vote => vote.poll === ownProps.poll.id)\r\n})\r\n\r\nexport default connect(mapStateToProps)(PollItem);","import React from 'react';\r\nimport PollItem from './PollItem';\r\nimport { Card } from 'reactstrap';\r\nimport { connect } from 'react-redux';\r\n\r\nexport class PollList extends React.Component {\r\n\r\n\trender() {\r\n    let polls = [];\r\n\t\tthis.props.polls.forEach(poll => {\r\n      polls.push(\r\n        <Card key={ poll.id } className=\"content-section mb-4\">\r\n          <PollItem \r\n            poll={ poll }  \r\n          />\r\n        </Card>\r\n\r\n      )\r\n\t\t})\r\n      return (\r\n        <div className=\"card-columns\">\r\n          { polls }\r\n        </div>\r\n      )\r\n\t  }\r\n  }\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    polls: state.polls.polls\r\n  }\r\n  \r\n}\r\n\r\nexport default connect(mapStateToProps)(PollList);","import React from 'react'\r\nimport PollList from \"./polls/PollList\"\r\nimport { UncontrolledAlert } from 'reactstrap';\r\nimport { motion } from 'framer-motion';\r\n\r\nclass Home extends React.Component {\r\n  render() {\r\n    let welcomeMsg = '';\r\n    if (this.props.location.state !== undefined) {\r\n      welcomeMsg =  \r\n      <UncontrolledAlert className=\"alert\">\r\n        {this.props.location.state.message}\r\n      </UncontrolledAlert>\r\n    }\r\n                          \r\n    return (\r\n      <motion.div\r\n        \r\n        animate={{opacity: 1, y: 0}}\r\n        exit={{opacity: 0, y: '100vh'}}\r\n        transition={ pageTransition } \r\n      >\r\n        { welcomeMsg }\r\n        <PollList />\r\n      </motion.div>\r\n      \r\n    )\r\n  }\r\n}\r\n\r\nconst pageTransition = {\r\n  transition: 'linear',\r\n}\r\n\r\nexport default Home","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport {\r\n  Collapse,\r\n  NavbarToggler\r\n} from 'reactstrap';\r\n\r\nconst Example = (props) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const toggle = () => setIsOpen(!isOpen);\r\n\r\n  const loggedInNavbar = (\r\n    <header className=\"site-header mb-3\">\r\n      <nav className=\"navbar navbar-expand-md navbar-dark bg-steel fixed-top\">\r\n        <div className=\"container\">\r\n          <Link to=\"/\" className=\"navbar-brand brand-text mr-3\">purpolls</Link>\r\n          <NavbarToggler onClick={toggle} />\r\n          <Collapse isOpen={isOpen} navbar>\r\n            <div className=\"navbar-nav ml-auto\">\r\n              <Link to=\"/\" className=\"nav-item nav-link\">Home</Link>\r\n              <Link to=\"/add-poll\" className=\"nav-item nav-link\">New Poll</Link>\r\n              <Link to={`/users/${ props.username }`} className=\"nav-item nav-link\">Profile</Link>\r\n              <Link to=\"/logout\" className=\"nav-item nav-link\">Log Out</Link>\r\n            </div>\r\n          </Collapse>\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  );\r\n\r\n  const loggedOutNavbar = (\r\n    <header className=\"site-header mb-3\">\r\n      <nav className=\"navbar navbar-expand-md navbar-dark bg-steel fixed-top\">\r\n        <div className=\"container\">\r\n          <Link to=\"/\" className=\"navbar-brand brand-text mr-3\">purpolls</Link>\r\n          <NavbarToggler onClick={toggle} />\r\n          <Collapse isOpen={isOpen} navbar>\r\n            <div className=\"navbar-nav ml-auto\">\r\n              <Link to=\"/\" className=\"nav-item nav-link\">Home</Link>\r\n              <Link to=\"/register\" className=\"nav-item nav-link\">Register</Link>\r\n              <Link to=\"/login\" className=\"nav-item nav-link\">Log In</Link>\r\n            </div>\r\n          </Collapse>\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  )\r\n\r\n  return (\r\n      <div>{ props.isAuthenticated ? loggedInNavbar : loggedOutNavbar }</div>   \r\n    )\r\n}\r\n\r\n//export default Example;\r\n/*const Navbar = (props) => {\r\n\tconst loggedOutNavbar = (\r\n\t\t\t<header className=\"site-header mb-3\">\r\n        <nav className=\"navbar navbar-expand-md bg-steel fixed-top\">\r\n          <div className=\"container\">\r\n            <Link to=\"/\" className=\"navbar-brand brand-text mr-3\">purpolls</Link>\r\n            <NavbarToggler onClick={toggle} />\r\n            <Collapse isOpen={isOpen} navbar>\r\n              <div className=\"navbar-nav mr-auto\"></div>\r\n              <div className=\"navbar-nav\">\r\n                  <Link to=\"/\" className=\"nav-item nav-link\">Home</Link>\r\n                  <Link to=\"/register\" className=\"nav-item nav-link\">Register</Link>\r\n                  <Link to=\"/login\" className=\"nav-item nav-link\">Log In</Link>\r\n              </div>\r\n            </Collapse>\r\n          </div>\r\n        </nav>\r\n      </header>\r\n\t\t)\r\n\r\n\tconst loggedInNavbar = (\r\n\t\t<header className=\"site-header mb-3\">\r\n      <nav className=\"navbar navbar-expand-md navbar-dark bg-steel fixed-top\">\r\n        <div className=\"container\">\r\n          <Link to=\"/\" className=\"navbar-brand brand-text mr-3\">purpolls</Link>\r\n          <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarToggle\" aria-controls=\"navbarToggle\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n          <span className=\"navbar-toggler-icon\"></span>\r\n          </button>\r\n          <div className=\"collapse navbar-collapse\" id=\"navbarToggle\">\r\n            <div className=\"navbar-nav mr-auto\"></div>\r\n            <div className=\"navbar-nav\">\r\n                <Link to=\"/\" className=\"nav-item nav-link\">Home</Link>\r\n                <Link to=\"/add-poll\" className=\"nav-item nav-link\">New Poll</Link>\r\n                <Link to={`/users/${ props.username }`} className=\"nav-item nav-link\">Profile</Link>\r\n                <Link to=\"/logout\" className=\"nav-item nav-link\">Log Out</Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </header>\r\n\t)\r\n\t\treturn (\r\n\t\t\t<div>{ props.isAuthenticated ? loggedInNavbar : loggedOutNavbar }</div>\t\t\r\n\t\t)\r\n\t}*/\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    isAuthenticated: state.auth.isAuthenticated,\r\n    username: state.auth.user.username\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Example);","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Row, Col, Form, FormGroup } from 'reactstrap';\r\nimport { connect } from 'react-redux';\r\nimport { handleLogin } from '../redux/actions/auth'\r\nimport { motion } from 'framer-motion';\r\n\r\n\r\nclass Login extends React.Component {\r\n\tstate = {\r\n\t\tusername: '',\r\n\t\tpassword: ''\r\n\t}\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault()\r\n    this.props.handleLogin(this.state, this.props.history)\r\n  }\r\n\r\n\thandleChange = event => {\r\n\t\tconst inputName = event.target.name; // username, password\r\n\t\tconst inputValue = event.target.value;\r\n\t\tthis.setState(prevState => {\r\n\t\t\tconst newState = prevState ;\r\n\t\t\tnewState[inputName] = inputValue;\r\n\t\t\treturn newState\r\n\t\t})\r\n\t}\r\n    \r\n\trender() {\r\n\t\treturn (\r\n      <motion.div\r\n        initial={{opacity: 0, x: '-100vh'}}\r\n        animate={{opacity: 1, x: 0}}\r\n        exit={{opacity: 0, x: '-100vh'}} \r\n        transition={{transition: 'linear'}}\r\n      >\r\n    \t\r\n        <Row>\r\n          <Col sm=\"12\" md={{ size: 6, offset: 3 }}>\r\n    \t\t\t\t<Form \r\n              className=\"form-container\"\r\n              method=\"post\" \r\n              onSubmit={ this.handleSubmit }>\r\n    \t\t\t\t\t<legend className=\"mb-4\">Log In</legend>\r\n              <FormGroup> \r\n  \t\t\t\t\t\t\t<input\r\n  \t\t\t\t\t\t\t\ttype=\"text\" \r\n  \t\t\t\t\t\t\t\tname=\"username\"\t\t\r\n                  placeholder=\"Username\"\r\n  \t\t\t\t\t\t\t\tonChange={ this.handleChange } \r\n                />\r\n              </FormGroup>\r\n\r\n              <FormGroup>\r\n  \t\t\t\t\t\t\t<input \r\n  \t\t\t\t\t\t\t\ttype=\"password\" \r\n  \t\t\t\t\t\t\t\tname=\"password\"\r\n                  placeholder=\"Password\"\t\t\t\t\t\t\t\t\r\n  \t\t\t\t\t\t\t\tonChange={ this.handleChange } \r\n                />\r\n  \t\t\t\t\t  </FormGroup>\r\n\r\n              <FormGroup>\r\n                <button \r\n                  style={{ margin: '20px auto' }}\r\n                  className=\"btn custom-btn purple-btn\" \r\n                  type=\"submit\">Login</button> \r\n              </FormGroup>\r\n\r\n      \t\t\t\t\r\n  \t\t\t\t\t  <small className=\"text-muted\">Need An Account? \r\n                <Link className=\"ml-2\" to=\"/register\">Sign Up Now</Link>\r\n  \t\t\t\t\t  </small>\r\n              \r\n            </Form>\r\n          </Col>\r\n        </Row>\r\n          \r\n    \t\t\r\n      </motion.div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default connect(null, { handleLogin })(Login);\r\n\r\n","import axiosInstance from '../../axiosInstance';\r\nimport axios from 'axios';\r\nimport { getUserVotes, getUserLikes, getUserDislikes } from './polls';\r\nimport { getErrors } from './errors';\r\nimport { createMessage } from './messages';\r\nimport { addNewUser } from './users';\r\nimport { \r\n  USER_AUTHENTICATED,\r\n  HANDLE_LOGIN,\r\n  HANDLE_LOGOUT,\r\n  REMOVE_USER_VOTES,\r\n  REMOVE_USER_LIKES,\r\n  REMOVE_USER_DISLIKES\r\n} from './types.js'\r\n\r\nexport const verifyCurrentUser = () => (dispatch, getState) => {\r\n  axiosInstance.get('/current_user/')\r\n    .then(response => {\r\n      console.log(response)\r\n      dispatch({\r\n        type: USER_AUTHENTICATED,\r\n        payload: response.data\r\n      })\r\n\r\n      const { id } = getState().auth.user\r\n      dispatch(getUserVotes(id))\r\n      dispatch(getUserLikes(id))\r\n      dispatch(getUserDislikes(id))\r\n      \r\n    }).catch(error => console.log(error))\r\n}\r\n\r\nexport const handleRegistration = (data, history) => dispatch => {\r\n  axiosInstance.post('/register/', {\r\n    username: data.username,\r\n    email: data.email,\r\n    password: data.password,\r\n  })\r\n    .then(response => {\r\n      dispatch(addNewUser(response.data))\r\n      dispatch(createMessage({ registerSuccess: 'Your account has been created successfully! Log in now to start polling!'}))\r\n      history.push('/login')\r\n    })\r\n    .catch(error => dispatch(getErrors(error.response)))\r\n}\r\n\r\nexport const handleLogin = (data, history) => (dispatch, getState) => {\r\n  axiosInstance.post('/token/obtain/', {\r\n    username: data.username,\r\n    password: data.password\r\n  })\r\n    .then(response => {\r\n      dispatch({\r\n        type: HANDLE_LOGIN,\r\n        payload: response.data\r\n      })\r\n\r\n      const { id, username } = getState().auth.user\r\n      dispatch(createMessage({ loginSuccess: `Welcome ${username}! You have successfully logged in.`}))\r\n      dispatch(getUserVotes(id))\r\n      dispatch(getUserLikes(id))\r\n      dispatch(getUserDislikes(id))\r\n\r\n      axiosInstance.defaults.headers['Authorization'] = \"Bearer \" + response.data.access;\r\n      localStorage.setItem('accessToken', response.data.access);\r\n      localStorage.setItem('refreshToken', response.data.refresh);\r\n      history.push('/')\r\n\r\n    }).catch(error => dispatch(getErrors(error.response)))\r\n}\r\n\r\nexport const handleLogout = () => dispatch => {\r\n  localStorage.removeItem('accessToken');\r\n  localStorage.removeItem('refreshToken');\r\n  dispatch({ type: HANDLE_LOGOUT })\r\n  dispatch({ type: REMOVE_USER_VOTES })\r\n  dispatch({ type: REMOVE_USER_LIKES })\r\n  dispatch({ type: REMOVE_USER_DISLIKES })\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { handleLogout } from '../redux/actions/auth'\r\nimport { motion } from 'framer-motion';\r\n\r\n\r\nclass Logout extends React.Component {\r\n\r\n  componentDidMount() {\r\n    this.props.handleLogout()\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <motion.div\r\n        initial={{opacity: 0, x: '-100vh'}}\r\n        animate={{opacity: 1, x: 0}}\r\n        exit={{opacity: 0, x: '-100vh'}} \r\n      >\r\n        <h2>You have been logged out</h2>\r\n        <div className=\"border-top pt-3\">\r\n          <small className=\"text-muted\">\r\n            <Link to=\"/login\">Log In Again</Link>\r\n          </small>\r\n        </div>  \r\n      </motion.div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(null, { handleLogout })(Logout)\r\n\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Row, Col, Form, FormGroup } from 'reactstrap';\r\nimport { connect } from 'react-redux';\r\nimport { handleRegistration } from '../redux/actions/auth';\r\nimport { motion } from 'framer-motion';\r\n\r\n\r\nclass Register extends React.Component {\r\n  state = {\r\n    username: '',\r\n    email: '',\r\n    password: '', \r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault()\r\n    this.props.handleRegistration(this.state, this.props.history)\r\n  }\r\n\r\n  handleChange = event => {\r\n    const inputName = event.target.name; // username, password\r\n    const inputValue = event.target.value;\r\n    this.setState(prevState => {\r\n      const newState = prevState ;\r\n      newState[inputName] = inputValue;\r\n      return newState\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <motion.div\r\n        initial={{opacity: 0, x: '-100vh'}}\r\n        animate={{opacity: 1, x: 0}}\r\n        exit={{opacity: 0, x: '-100vh'}} \r\n        transition={{transition: 'linear'}}\r\n      >\r\n        <Row>\r\n          <Col sm=\"12\" md={{ size: 6, offset: 3 }}>\r\n            <Form\r\n              className=\"form-container\" \r\n              method=\"POST\"\r\n              onSubmit={ this.handleSubmit }\r\n            >\r\n              <legend className=\"mb-4\">Register for a new account!</legend>\r\n                <FormGroup>\r\n                  <input \r\n                    autoComplete=\"new-password\"\r\n                    type=\"text\" \r\n                    name=\"username\"\r\n                    placeholder=\"Username\"\r\n                    onChange={ this.handleChange } />\r\n                </FormGroup>\r\n\r\n                <FormGroup>\r\n                  <input \r\n                    autoComplete=\"new-password\"\r\n                    type=\"text\" \r\n                    name=\"email\" \r\n                    placeholder=\"Email\"             \r\n                    onChange={ this.handleChange } />\r\n                </FormGroup>\r\n\r\n                <FormGroup>\r\n                  <input \r\n                    type=\"password\" \r\n                    name=\"password\"\r\n                    placeholder=\"Password\"\r\n                    onChange={ this.handleChange } />\r\n                </FormGroup>\r\n\r\n                <FormGroup>\r\n                  <button\r\n                  style={{ margin: '20px auto' }} \r\n                  className=\"btn custom-btn purple-btn\" \r\n                  type=\"submit\">Sign Up</button>\r\n                </FormGroup>\r\n\r\n                \r\n                <small className=\"text-muted\">Already Have An Account? \r\n                  <Link className=\"ml-2\" to=\"/login\">Log In</Link>\r\n                </small>\r\n                \r\n            </Form>\r\n          </Col>\r\n        </Row>\r\n      </motion.div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(null, { handleRegistration })(Register)","import axios from \"axios\";\r\nimport { GET_USERS, ADD_NEW_USER } from './types.js';\r\n\r\nexport const getUsers = () => dispatch => {\r\n  axios.get('http://localhost:8000/api/users/')\r\n    .then(response => {\r\n      dispatch({\r\n        type: GET_USERS,\r\n        payload: response.data\r\n      })\r\n    }).catch(error => console.log(error))\r\n}\r\n\r\nexport const addNewUser = newUser => dispatch => {\r\n  dispatch({\r\n    type: ADD_NEW_USER,\r\n    payload: newUser \r\n  })\r\n}\r\n","import React from 'react'\r\nimport { FaUserEdit } from 'react-icons/fa';\r\n\r\nexport class ProfilePicChanger extends React.Component {\r\n\r\n  handleChange = (event) => {\r\n    this.props.uploadImage(event)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <label for=\"profile-pic-upload\" style={ customUpload } >\r\n          <FaUserEdit style={{ fontSize: '1.5rem'}}/>\r\n        </label>\r\n        <input id=\"profile-pic-upload\" type=\"file\" onChange={this.handleChange}/>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nconst customUpload = {\r\n  display: 'inline-block',\r\n  cursor: 'pointer'\r\n}\r\n\r\nexport default ProfilePicChanger","import React from 'react';\r\nimport './Tooltip.css';\r\n\r\nclass Tooltip extends React.Component {\r\n  render() {\r\n    const { text } = this.props;\r\n    return (\r\n      <div tooltip-text={ `${text}` }>\r\n        { this.props.children }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Tooltip","import React from 'react'\r\nimport moment from 'moment';\r\nimport axios from 'axios';\r\nimport axiosInstance from \"../axiosInstance\";\r\nimport { motion } from 'framer-motion';\r\nimport { connect } from 'react-redux';\r\nimport { Row, Col } from 'reactstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { FiCheckCircle } from 'react-icons/fi'\r\nimport { AiFillLike } from \"react-icons/ai\";\r\nimport { AiFillDislike } from \"react-icons/ai\";\r\nimport { GoCommentDiscussion } from 'react-icons/go';\r\nimport { FaCrown } from 'react-icons/fa';\r\nimport { FaPoll } from 'react-icons/fa';\r\nimport { AiOutlineForm } from \"react-icons/ai\";\r\nimport ProfilePicChanger from \"./ProfilePicChanger\";\r\nimport Tooltip from './Tooltip'\r\n\r\nclass UserProfile extends React.Component {\r\n  state = {\r\n    image: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { username } = this.props.match.params;\r\n    axios.get(`http://localhost:8000/api/users/${username}/profile-pic-upload/`, {\r\n      headers: {\r\n        'Authorization' : localStorage.getItem('accessToken') ? \"Bearer \" + localStorage.getItem('accessToken') : null,\r\n        'accept' : 'application/json',\r\n        'content-type': 'multipart/form-data'\r\n\r\n      }\r\n    })\r\n      .then(response => this.setState({ image: response.data.image }))\r\n  }\r\n\r\n  uploadImage = event => {\r\n    console.log(event.target.files)\r\n    let formData = new FormData();\r\n    formData.append('image', event.target.files[0]);\r\n    const { username } = this.props.match.params;\r\n    axios.put(`http://localhost:8000/api/users/${username}/profile-pic-upload/`, formData, {\r\n      headers: {\r\n        'Authorization' : localStorage.getItem('accessToken') ? \"Bearer \" + localStorage.getItem('accessToken') : null,\r\n        'accept' : 'application/json',\r\n        'content-type': 'multipart/form-data'\r\n      }\r\n    })\r\n      .then(response => {\r\n        console.log(response.data)\r\n        this.setState({ image: response.data.image })\r\n      })\r\n      .catch(error => console.log(error))\r\n  }\r\n\r\n  render() {\r\n    const totalPolls = this.props.userPolls.length;\r\n\r\n    let totalRenown = 0;\r\n    this.props.userPolls.map((poll, index) => {\r\n      for (let i=0; i < poll.choices.length; i++) {\r\n        totalRenown += poll.choices[i].votes\r\n      }\r\n      totalRenown += poll.likes;\r\n      totalRenown += poll.total_comments;\r\n      totalRenown -= poll.dislikes; \r\n    })\r\n\r\n    const userProfile = this.props.userProfile && this.state.image ? (\r\n      <Row>\r\n        <Col lg=\"4\">\r\n          <div className=\"content-section\">\r\n          <div className=\"media article-metadata\">\r\n            <img className=\"rounded-circle account-img\" src={'http://localhost:8000' + this.state.image}/>\r\n            <div className=\"media-body mt-3\" style={{ overflow: 'hidden' }}>\r\n              <h2 className=\"account-heading\">{ this.props.userProfile.username }</h2> \r\n              <p className=\"text-secondary\">{ this.props.userProfile.email }</p>\r\n\r\n              { this.props.userProfile.username === this.props.loggedInUser.username ?\r\n                <ProfilePicChanger uploadImage={ this.uploadImage }/> \r\n                : '' }\r\n            </div>\r\n          </div>\r\n\r\n            <div style={ userStatsContainer }>\r\n              <small>Polls</small>\r\n              <div>\r\n                <FaPoll/>\r\n                <small className=\"ml-1\">{ totalPolls.toLocaleString() }</small>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={ userStatsContainer }>\r\n              <small>Renown</small>\r\n                <Tooltip \r\n                  text={ \"Renown Score = Votes + Likes - Dislikes + Comments\" }>\r\n                  <div>\r\n                    <FaCrown/>\r\n                    <small className=\"ml-1\">{ totalRenown.toLocaleString() }</small>\r\n                  </div>\r\n                </Tooltip>\r\n            </div>\r\n\r\n            <div style={ userStatsContainer }>\r\n              <small>Date joined</small>\r\n              <div>\r\n                <AiOutlineForm/>\r\n                <small className=\"ml-1\">{ moment(this.props.userProfile.date_joined).format('LL') }</small>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </Col>\r\n\r\n        <Col lg=\"8\" >\r\n          <div className=\"content-section\">\r\n            <h2 className=\"mb-3\">Your Polls</h2>\r\n\r\n            { this.props.userPolls.map((poll, index) => {\r\n                let totalVotes = 0;\r\n                for (let i=0; i < poll.choices.length; i++) {\r\n                  totalVotes += poll.choices[i].votes\r\n                }\r\n                return (\r\n                  <div className=\"article-metadata\" key={index}>\r\n                    <div style={{ padding: '5px'}}>\r\n                      <Link to={`/polls/${poll.id}`}><h5>{ poll.question_text }</h5></Link>\r\n                      \r\n                      <div style={ pollStatsContainer } >\r\n                        <small>Votes</small>\r\n                        <div>\r\n                          <FiCheckCircle style={{color: '#9365a3'}}/>\r\n                          <small className=\"ml-1\">{ totalVotes.toLocaleString() }</small>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div style={ pollStatsContainer }>\r\n                        <small>Likes</small>\r\n                        <div>\r\n                          <AiFillLike style={{color: '#9365a3'}}/>\r\n                          <small className=\"ml-1\">{ poll.likes.toLocaleString() }</small>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div style={ pollStatsContainer }>\r\n                        <small>Dislikes</small>\r\n                        <div>\r\n                          <AiFillDislike style={{color: '#9365a3'}}/>\r\n                          <small className=\"ml-1\">{ poll.dislikes.toLocaleString() }</small>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div style={ pollStatsContainer } >\r\n                        <small>Comments</small>\r\n                        <div>\r\n                          <GoCommentDiscussion style={{color: '#9365a3'}}/>\r\n                          <small className=\"ml-2\">{ poll.total_comments.toLocaleString() }</small>\r\n                        </div>\r\n                      </div>\r\n\r\n                    </div>\r\n                  </div>\r\n                )            \r\n              })\r\n            }\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n    ) : (\r\n\r\n    <div> Loading... please wait. </div> \r\n\r\n    )\r\n    return (\r\n    <motion.div\r\n      initial={{opacity: 0, x: '-100vh'}}\r\n      animate={{opacity: 1, x: 0}}\r\n      exit={{opacity: 0, x: '-100vh'}} \r\n      transition={{transition: 'linear'}}\r\n    >\r\n      { userProfile }\r\n    </motion.div>\r\n    )\r\n  }\r\n}\r\n\r\nconst pollStatsContainer = {\r\n  display: 'inline-block',\r\n  marginRight: '40px'\r\n}\r\n\r\nconst userStatsContainer = {\r\n  display: 'inline-block',\r\n  marginRight: '25px',\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const username = ownProps.match.params.username;\r\n  return {\r\n    userProfile: state.users.users.find(user => user.username === username),\r\n    userPolls: state.polls.polls.filter(poll => poll.author === username),\r\n    loggedInUser: state.auth.user\r\n  }\r\n}\r\nexport default connect(mapStateToProps) (UserProfile)","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { connect } from 'react-redux';\r\nimport { motion } from 'framer-motion';\r\n\r\n\r\nclass ProtectedRoute extends React.Component {\r\n  render() {\r\n    const { component: Component, ...props } = this.props\r\n\r\n    return (\r\n      <Route { ...props }\r\n        render={ props => (\r\n          this.props.isAuthenticated ? \r\n          <Component { ...props } /> :\r\n\r\n          <motion.div\r\n            initial={{opacity: 0, x: '-100vh'}}\r\n            animate={{opacity: 1, x: 0}}\r\n            exit={{opacity: 0, x: '-100vh'}} \r\n          >\r\n            <Redirect to=\"/login\" /> \r\n          </motion.div>\r\n        )} \r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    isAuthenticated: state.auth.isAuthenticated\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ProtectedRoute)","import axios from \"axios\";\r\nimport axiosInstance from '../../axiosInstance';\r\nimport { getErrors } from './errors';\r\nimport { \r\n  GET_COMMENTS, \r\n  ADD_COMMENT,\r\n  GET_USER_COMMENT_LIKES,\r\n  GET_USER_COMMENT_DISLIKES,\r\n  INCREMENT_COMMENT_LIKES,\r\n  DECREMENT_COMMENT_LIKES,\r\n  INCREMENT_COMMENT_DISLIKES,\r\n  DECREMENT_COMMENT_DISLIKES,\r\n  SET_COMMENT_LIKES_AND_DISLIKES\r\n} from \"./types\";\r\n\r\nexport const getComments = pollId => (dispatch, getState) => {\r\n  axios.get(`http://localhost:8000/api/polls/${pollId}/comments/`)\r\n    .then(response => {\r\n      dispatch({\r\n        type: GET_COMMENTS,\r\n        payload: response.data\r\n      })\r\n      const { comments } = getState().comments\r\n      dispatch(setCommentLikesAndDislikes(comments))\r\n    })\r\n\r\n    .catch(error => console.log(error))\r\n}\r\n\r\nexport const addComment = (pollId, data) => (dispatch, getState) => {\r\n  const { id: userId } = getState().auth.user\r\n  axiosInstance.post(`http://localhost:8000/api/polls/${pollId}/comments/`, {\r\n      poll_id: pollId,\r\n      author: userId,\r\n      comment_text: data.comment\r\n    })\r\n    .then(response => {\r\n      dispatch({\r\n        type: ADD_COMMENT,\r\n        payload: response.data\r\n      })\r\n      const { comments } = getState().comments\r\n      dispatch(setCommentLikesAndDislikes(comments))\r\n    })\r\n    .catch(error => dispatch(getErrors(error.response)))\r\n}\r\n\r\nexport const getUserCommentLikes = pollId => (dispatch, getState) => {\r\n  const { id: userId } = getState().auth.user\r\n  axios.get(`http://localhost:8000/api/users/${userId}/polls/${pollId}/comment-likes/`)\r\n    .then(response => {\r\n      dispatch({\r\n        type: GET_USER_COMMENT_LIKES,\r\n        payload: response.data\r\n      })\r\n    })\r\n    .catch(error => console.log(error))\r\n}\r\n\r\nexport const getUserCommentDislikes = pollId => (dispatch, getState) => {\r\n  const { id: userId } = getState().auth.user\r\n  axios.get(`http://localhost:8000/api/users/${userId}/polls/${pollId}/comment-dislikes/`)\r\n    .then(response => {\r\n      dispatch({\r\n        type: GET_USER_COMMENT_DISLIKES,\r\n        payload: response.data\r\n      })\r\n    })\r\n    .catch(error => console.log(error))\r\n}\r\n\r\nexport const toggleCommentLike = (commentId, pollId) => (dispatch, getState) => {\r\n  const { id: userId } = getState().auth.user\r\n  const { \r\n    commentsLiked, \r\n    commentsDisliked, \r\n    commentsLikeCounters, \r\n    commentsDislikeCounters \r\n  } = getState().comments\r\n  \r\n  const commentLiked = commentsLiked[commentId];\r\n  const commentDisliked = commentsDisliked[commentId]\r\n  \r\n  if (commentLiked === undefined && commentDisliked === undefined) {\r\n    axiosInstance.patch(`http://localhost:8000/api/comments/${commentId}/likes/`, {\r\n      signal: 'add like',\r\n      user_id: userId,\r\n      poll_id: pollId,\r\n      likes: commentsLikeCounters[commentId] + 1\r\n    })\r\n      .then(response => console.log(response.data))\r\n\r\n    dispatch({ \r\n      type: INCREMENT_COMMENT_LIKES,\r\n      payload: commentId\r\n    })\r\n  }\r\n\r\n  if (commentLiked === true && commentDisliked === undefined) {\r\n    axiosInstance.patch(`http://localhost:8000/api/comments/${commentId}/likes/`, {\r\n      signal: 'remove like',\r\n      user_id: userId,\r\n      poll_id: pollId,\r\n      likes: commentsLikeCounters[commentId] - 1\r\n    })\r\n      .then(response => console.log(response.data))\r\n\r\n    dispatch({\r\n      type: DECREMENT_COMMENT_LIKES,\r\n      payload: commentId\r\n    })\r\n  }\r\n\r\n  if (commentLiked === undefined && commentDisliked === true) {\r\n    axiosInstance.patch(`http://localhost:8000/api/comments/${commentId}/likes/`, {\r\n      signal: 'add like, remove dislike',\r\n      user_id: userId,\r\n      poll_id: pollId,\r\n      likes: commentsLikeCounters[commentId] + 1,\r\n      dislikes: commentsDislikeCounters[commentId] - 1\r\n    })\r\n      .then(response => console.log(response.data))\r\n\r\n    dispatch({\r\n      type: INCREMENT_COMMENT_LIKES,\r\n      payload: commentId\r\n    })\r\n    dispatch({\r\n      type: DECREMENT_COMMENT_DISLIKES,\r\n      payload: commentId\r\n    })\r\n  }\r\n}\r\n\r\nexport const toggleCommentDislike = (commentId, pollId) => (dispatch, getState) => {\r\n  const { id: userId } = getState().auth.user\r\n  const { \r\n    commentsLiked, \r\n    commentsDisliked, \r\n    commentsLikeCounters, \r\n    commentsDislikeCounters \r\n  } = getState().comments\r\n\r\n  const commentLiked = commentsLiked[commentId];\r\n  const commentDisliked = commentsDisliked[commentId]\r\n\r\n  if (commentLiked === undefined && commentDisliked === undefined) {\r\n    axiosInstance.patch(`http://localhost:8000/api/comments/${commentId}/dislikes/`, {\r\n      signal: 'add dislike',\r\n      user_id: userId,\r\n      poll_id: pollId,\r\n      dislikes: commentsDislikeCounters[commentId] + 1,\r\n    })\r\n      .then(response => console.log(response.data))\r\n\r\n    dispatch({\r\n      type: INCREMENT_COMMENT_DISLIKES,\r\n      payload: commentId\r\n    })\r\n  }\r\n\r\n  if (commentLiked === undefined && commentDisliked === true) {\r\n    axiosInstance.patch(`http://localhost:8000/api/comments/${commentId}/dislikes/`, {\r\n      signal: 'remove dislike',\r\n      user_id: userId,\r\n      poll_id: pollId,\r\n      dislikes: commentsDislikeCounters[commentId] - 1,\r\n    })\r\n      .then(response => console.log(response.data))\r\n\r\n    dispatch({\r\n      type: DECREMENT_COMMENT_DISLIKES,\r\n      payload: commentId\r\n    })\r\n  }\r\n\r\n  if (commentLiked === true && commentDisliked === undefined) {\r\n    axiosInstance.patch(`http://localhost:8000/api/comments/${commentId}/dislikes/`, {\r\n      signal: 'add dislike, remove like',\r\n      user_id: userId,\r\n      poll_id: pollId,\r\n      dislikes: commentsDislikeCounters[commentId] + 1, \r\n      likes: commentsLikeCounters[commentId] - 1\r\n    })\r\n      .then(response => console.log(response.data))\r\n\r\n    dispatch({\r\n      type: INCREMENT_COMMENT_DISLIKES,\r\n      payload: commentId\r\n    })\r\n    dispatch({\r\n      type: DECREMENT_COMMENT_LIKES,\r\n      payload: commentId\r\n    })\r\n  }\r\n}\r\n\r\n\r\nconst setCommentLikesAndDislikes = comments => {\r\n  return { \r\n    type: SET_COMMENT_LIKES_AND_DISLIKES,\r\n    payload: comments \r\n  }\r\n}\r\n","import React from 'react'\r\nimport { Form, FormGroup } from 'reactstrap';\r\nimport { connect } from 'react-redux';\r\nimport { addComment } from '../../redux/actions/comments';\r\n\r\n\r\nclass CommentForm extends React.Component {\r\n  state = {\r\n    comment: ''\r\n  }\r\n\r\n  handleComment = event => {\r\n    this.setState({ comment: event.target.value })\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { pollId } = this.props;\r\n    this.props.addComment(pollId, this.state);\r\n    this.setState({ comment: '' })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Form \r\n        className=\"comment-form\"\r\n        onSubmit={ this.handleSubmit }>\r\n        <FormGroup>\r\n          <textarea \r\n            className=\"rounded-border\" \r\n            placeholder=\"Add a comment\"\r\n            value={ this.state.comment }\r\n            onChange={ this.handleComment }>\r\n          </textarea>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <button className=\"btn custom-btn purple-btn\" type=\"submit\">Comment</button>\r\n        </FormGroup>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(null, { addComment })(CommentForm)","import React from 'react'\r\nimport { AiFillLike } from \"react-icons/ai\";\r\n\r\n\r\nclass LikeComment extends React.Component {\r\n  \r\n  handleClick = () => {\r\n    this.props.toggleLike()\r\n  }\r\n\r\n\trender() {\r\n\t\tconst { likes } = this.props\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<AiFillLike\r\n          className=\"hover active\"\r\n\t\t\t\t\tstyle={{ color: this.props.commentLiked ? '#943dff' : 'grey' }} \r\n\t\t\t\t\tonClick={ this.handleClick } >  \r\n\t\t\t\t</AiFillLike>\r\n        <span \r\n          style={ totalCommentLikes }> \r\n          { likes } \r\n        </span>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst totalCommentLikes = {\r\n  fontSize: '12px', \r\n  color: 'e1e1e1',\r\n  marginLeft: '6px'\r\n}\r\n\r\nexport default LikeComment;","import React from 'react'\r\nimport { AiFillDislike } from \"react-icons/ai\";\r\n\r\nclass DislikeComment extends React.Component {\r\n\r\n  handleClick = () => {\r\n    this.props.toggleDislike()\r\n  }\r\n\r\n  render() {\r\n    const { dislikes } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <AiFillDislike \r\n          className=\"ml-3 hover active\" \r\n          style={{ color: this.props.commentDisliked ? '#943dff' : 'grey' }}\r\n          onClick={ this.handleClick } /> \r\n        <span \r\n          className=\"pl-2\" \r\n          style={{ fontSize: '12px' }}> \r\n        { dislikes }   \r\n        </span>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DislikeComment","import React from 'react';\r\nimport moment from 'moment';\r\nimport LikeComment from './LikeComment';\r\nimport DislikeComment from './DislikeComment';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { toggleCommentLike, toggleCommentDislike } from '../../redux/actions/comments'\r\n\r\n\r\nclass CommentItem extends React.Component {\r\n\r\n  toggleLike = () => {\r\n    const { id: commentId, poll_id: pollId } = this.props.comment;\r\n    this.props.toggleCommentLike(commentId, pollId)\r\n  }\r\n\r\n  toggleDislike = () => {\r\n    const { id: commentId, poll_id: pollId } = this.props.comment;\r\n    this.props.toggleCommentDislike(commentId, pollId)\r\n  } \r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tcomment_text: comment,\r\n\t\t\tdate_posted: datePosted,\r\n\t\t\tauthor\r\n\t\t  } = this.props.comment\r\n\t\t\t \r\n\t\treturn (\r\n\t\t\t<div className=\"article-metadata\">\r\n\t\t\t\t<Link to={`/users/${ author }`} className=\"mr-1\">{ author }</Link>\r\n\t\t\t\t<small className=\"text-muted\">{ moment( datePosted ).fromNow() }</small>\r\n\t\t\t\t<p style={ commentTextFont } className=\"mt-1\">{ comment }</p>\r\n\r\n        <div style={ commentBtnContainer }>\r\n  \t\t\t\t<LikeComment \r\n            comment={ this.props.comment } \r\n            likes={ this.props.likes }\r\n            commentLiked={ this.props.commentLiked }\r\n            toggleLike={ this.toggleLike }\r\n          />\t\r\n\r\n          <DislikeComment\r\n            comment={ this.props.comment } \r\n            dislikes={ this.props.dislikes }\r\n            commentDisliked={ this.props.commentDisliked }\r\n            toggleDislike={ this.toggleDislike }\r\n          />\r\n        </div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst commentTextFont = {\r\n  fontSize: '15px',\r\n  fontFamily: 'Arial, sans-serif',\r\n  fontWeight: '500'\r\n}\r\n\r\nconst commentBtnContainer = {\r\n  position: 'relative', \r\n  bottom: '12px'\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const commentId = parseInt(ownProps.comment.id);\r\n  return {\r\n    likes: state.comments.commentsLikeCounters[commentId],\r\n    dislikes: state.comments.commentsDislikeCounters[commentId],\r\n    commentLiked: state.comments.commentsLiked[commentId],\r\n    commentDisliked: state.comments.commentsDisliked[commentId]\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { toggleCommentLike, toggleCommentDislike })(CommentItem);","import React from 'react';\r\nimport CommentItem from './CommentItem';\r\nimport { connect } from 'react-redux';\r\nimport { getComments, getUserCommentLikes, getUserCommentDislikes } from '../../redux/actions/comments'\r\n\r\n\r\nclass CommentList extends React.Component {\r\n  componentDidMount() {\r\n    const { pollId } = this.props\r\n    this.props.getComments(pollId)\r\n    this.props.getUserCommentLikes(pollId)\r\n    this.props.getUserCommentDislikes(pollId)\r\n  }\r\n\r\n\trender() {\r\n\t\treturn this.props.comments.map(comment => (\r\n\t\t\t<CommentItem \r\n        key={ comment.id } \r\n        comment={ comment } \r\n        userCommentLikes={ this.props.userCommentLikes }\r\n        userCommentDislikes={ this.props.userCommentDislikes }\r\n      />\r\n\t\t))\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    comments: state.comments.comments,\r\n    userCommentLikes: state.comments.userCommentLikes,\r\n    userCommentDislikes: state.comments.userCommentDislikes\r\n  }\r\n}\r\nexport default connect(mapStateToProps, { getComments, getUserCommentLikes, getUserCommentDislikes })(CommentList)","import React from 'react';\r\nimport { AiFillLike } from \"react-icons/ai\";\r\n\r\nclass LikePoll extends React.Component {\r\n\r\n  handleClick = () => {\r\n    this.props.toggleLike()\r\n  }\r\n\r\n\trender() {\r\n\t\tconst { likes, pollLiked } = this.props;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<AiFillLike\r\n          className=\"hover active\"\r\n          style={{ color: pollLiked ? '#943dff' : 'grey'  }}\r\n\t\t\t\t  onClick={ this.handleClick }\t\r\n\t\t\t\t/>\r\n        <span \r\n          className=\"pl-2\" \r\n          style={{ fontSize: '12px' }}> \r\n        { likes }   \r\n        </span>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default LikePoll;","import React from 'react';\r\nimport { AiFillDislike } from \"react-icons/ai\";\r\n\r\nclass DislikePoll extends React.Component {\r\n\r\n  handleClick = () => {\r\n    this.props.toggleDislike()\r\n  }\r\n\r\n  render() {\r\n    const { dislikes, pollDisliked } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <AiFillDislike \r\n          className=\"ml-3 hover active\" \r\n          style={{ color: pollDisliked ? '#943dff' : 'grey' }}\r\n          onClick={ this.handleClick } /> \r\n        <span \r\n          className=\"pl-2\" \r\n          style={{ fontSize: '12px' }}> \r\n        { dislikes }   \r\n        </span>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DislikePoll;","import React from 'react';\r\nimport './Modal.css'\r\n\r\nclass Modal extends React.Component {\r\n\r\n  closeModal = () => {\r\n    this.props.closeModal()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n     this.props.showModal ?         \r\n      <div className=\"modal-wrapper\">\r\n        <div className=\"modal-backdrop\" onClick={ this.closeModal }/>\r\n        <div className=\"modal-content\">\r\n          { this.props.children }\r\n        </div>\r\n      </div> : null\r\n    )\r\n  }\r\n}\r\n\r\nexport default Modal","import React from 'react';\r\nimport moment from 'moment';\r\nimport CommentForm from './CommentForm';\r\nimport CommentList from './CommentList';\r\nimport LikePoll from './LikePoll';\r\nimport DislikePoll from './DislikePoll';\r\nimport Modal from '../Modal';\r\nimport ChoiceList from './ChoiceList';\r\nimport { Row, Col } from 'reactstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { TiDelete } from 'react-icons/ti';\r\nimport { AiOutlineDoubleLeft } from 'react-icons/ai';\r\nimport { AiOutlineDoubleRight } from 'react-icons/ai';\r\nimport { connect } from 'react-redux';\r\nimport { deletePoll, togglePollLike, togglePollDislike } from '../../redux/actions/polls';\r\n\r\n\r\nclass PollDetail extends React.Component {\r\n\tstate = {\r\n    showModal: false\r\n\t}\r\n\r\n\ttoggleLike = () => {\r\n    const { id } = this.props.poll;\r\n    this.props.togglePollLike(id)\r\n  }\r\n\t\r\n  toggleDislike = () => {\r\n    const { id } = this.props.poll;\r\n    this.props.togglePollDislike(id)\r\n  }\r\n\r\n  deletePoll = () => {\r\n    const { id } = this.props.poll;\r\n    this.props.deletePoll(id, this.props.history);\r\n  }\r\n\r\n  showModal = () => {\r\n    this.setState({ showModal: true })\r\n  }\r\n\r\n  closeModal = () => {\r\n    this.setState({ showModal: false })\r\n  }\r\n\r\n  getNextPollId = () => {\r\n    const { polls } = this.props;\r\n    const { id: pollId } = this.props.match.params\r\n    const index = polls.findIndex(poll => poll.id === parseInt(pollId))\r\n    try {\r\n      return polls[index + 1].id\r\n    } catch (e) {\r\n      return polls[0].id\r\n    }\r\n  }\r\n\r\n  getPreviousPollId = () => {\r\n    const { polls } = this.props;\r\n    const { id: pollId } = this.props.match.params\r\n    const index = polls.findIndex(poll => poll.id === parseInt(pollId))\r\n    try {\r\n      return polls[index - 1].id\r\n    } catch (e) {\r\n      return polls[polls.length - 1].id\r\n    }\r\n  }\r\n\r\n\trender() { \r\n    const poll = this.props.poll ? (\r\n      <article \r\n        className=\"media content-section\" \r\n      >   \r\n        \r\n          <div className=\"media-body\">\r\n            <div className=\"article-metadata\">\r\n              <small className=\"text-muted\">posted by</small>\r\n              <Link to={`/users/${ this.props.poll.author }`} className=\"pl-1\">{ this.props.poll.author }</Link>\r\n              <small className=\"pl-2 text-muted\">{ moment( this.props.poll.date_posted ).fromNow() }</small> \r\n              \r\n              { this.props.username === this.props.poll.author ? \r\n                <TiDelete \r\n                  style={ deletePollBtn } \r\n                  onClick={ this.showModal }/>\r\n                : '' }\r\n            </div>\r\n\r\n            <h2>{ this.props.poll.question_text }</h2> \r\n\r\n            { this.props.vote ? \r\n              <p> You selected \"{ this.props.vote.choice_text }\".</p> : ''} \r\n\r\n            <div style={ choicesContainer }>\r\n              <div style={ pageTransitionLeftBtn }>\r\n                <Link \r\n                  className=\"mr-2\" \r\n                  to={`/polls/${this.getPreviousPollId()}`}\r\n                >\r\n                  <AiOutlineDoubleLeft />\r\n                </Link>\r\n              </div>\r\n              \r\n              <ChoiceList\r\n                pollId={ this.props.poll.id } \r\n                choices={ this.props.poll.choices }\r\n                vote={ this.props.vote } \r\n              />\r\n              \r\n              \r\n              <div style={ pageTransitionRightBtn }>\r\n                <Link \r\n                  className=\"mr-2\" \r\n                  to={`/polls/${this.getNextPollId()}`}\r\n                >\r\n                  <AiOutlineDoubleRight />\r\n                </Link>\r\n              </div>\r\n            </div>\r\n      \r\n            <Modal showModal={ this.state.showModal } closeModal={ this.closeModal }>\r\n              <h1>Are you sure you want to delete this poll?</h1>\r\n              <button className=\"btn custom-btn red-btn mb-2\" onClick={ this.deletePoll }>Delete</button>{' '}\r\n              <button className=\"btn custom-btn purple-btn\" onClick={ this.closeModal }>Cancel</button> \r\n            </Modal>\r\n\r\n            <div className=\"mb-3\" style={{ float: 'left' }}>\r\n              \r\n              <LikePoll \r\n                likes={ this.props.likes } \r\n                pollLiked={ this.props.pollLiked }\r\n                toggleLike={ this.toggleLike }  \r\n              />\r\n\r\n              <DislikePoll\r\n                dislikes={ this.props.dislikes }\r\n                pollDisliked={ this.props.pollDisliked }\r\n                toggleDislike={ this.toggleDislike }\r\n              />\r\n            </div>\r\n\r\n            <CommentForm pollId={ this.props.poll.id } />\r\n            <CommentList pollId={ this.props.poll.id } />\r\n            \r\n          </div>\r\n        </article>\r\n      \r\n    ) : (\r\n\r\n    <div> Loading... please wait. </div> \r\n\r\n    )\r\n\r\n\t\treturn (\r\n      <motion.div\r\n        initial={{opacity: 0, x: '-100vh'}}\r\n        animate={{opacity: 1, x: 0}}\r\n        exit={{opacity: 0, x: '-100vh'}} \r\n        transition={{transition: 'linear'}}\r\n      >\r\n      <Row>\r\n        <Col xs=\"12\" md={{ size: 10, offset: 1 }}>\r\n\t\t\t\t  { poll } \r\n        </Col>\r\n      </Row>\r\n      </motion.div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst choicesContainer = {\r\n  width: '100%',  \r\n  position: 'relative'\r\n}\r\n\r\nconst deletePollBtn = {\r\n  float: 'right', \r\n  cursor: 'pointer',\r\n  fontSize: '20px'\r\n}\r\n\r\nconst pageTransitionRightBtn = {\r\n  display: 'block',\r\n  fontSize: '35px',\r\n  position: 'absolute',\r\n  right: '-80px',\r\n  top: '30%',\r\n  cursor: 'pointer'\r\n}\r\n\r\nconst pageTransitionLeftBtn = {\r\n  display: 'block',\r\n  fontSize: '35px',\r\n  position: 'absolute',\r\n  left: '-75px',\r\n  top: '30%',\r\n  cursor: 'pointer'\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const pollId = parseInt(ownProps.match.params.id);\r\n  return {\r\n    polls: state.polls.polls,\r\n    poll: state.polls.polls.find(poll => poll.id === pollId),\r\n    likes: state.polls.pollsLikeCounters[pollId],\r\n    dislikes: state.polls.pollsDislikeCounters[pollId],\r\n    pollLiked: state.polls.pollsLiked[pollId],\r\n    pollDisliked: state.polls.pollsDisliked[pollId],\r\n    vote: state.polls.userVotes.find(vote => vote.poll === pollId),\r\n    username: state.auth.user.username\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { deletePoll, togglePollDislike, togglePollLike })(PollDetail)","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Row, Col, Form, FormGroup } from 'reactstrap';\r\nimport { addPoll } from '../../redux/actions/polls';\r\nimport { motion } from 'framer-motion';\r\n\r\n\r\nclass NewPollForm extends React.Component {\r\n\r\n  state = {\r\n    question: '',\r\n    choices: [\r\n      { choice_text: \"\" },\r\n      { choice_text: \"\" }\r\n    ]\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    this.props.addPoll(this.state, this.props.history)\r\n\r\n  }\r\n\r\n  handleQuestion = event => {\r\n    this.setState({ question: event.target.value })\r\n  }\r\n\r\n  handleChoices = (event, index) => {\r\n    let choices = [ ...this.state.choices ]\r\n    choices[index]['choice_text'] = event.target.value \r\n    this.setState({ choices: choices })\r\n  }\r\n\r\n  addChoice = () => {\r\n    this.setState({ \r\n      choices: this.state.choices.concat([{ choice_text: \"\" }]) \r\n    })\r\n  }\r\n\r\n  removeChoice = index => {\r\n    console.log(\"index:\", index)\r\n    let choices = [ ...this.state.choices ];\r\n    choices.splice(index, 1);\r\n    this.setState({ choices: choices })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n    <motion.div\r\n        initial={{opacity: 0, x: '-100vh'}}\r\n        animate={{opacity: 1, x: 0}}\r\n        exit={{opacity: 0, x: '-100vh'}} \r\n        transition={{transition: 'linear'}}\r\n      >\r\n      <Row>\r\n        <Col sm=\"12\" md={{ size: 10, offset: 1 }}>\r\n          <div className=\"content-section\">\r\n            <Form \r\n              className=\"poll-form\"\r\n              onSubmit={ this.handleSubmit  }>\r\n              <legend className=\"border-bottom mb-4\">New Poll</legend>\r\n\r\n                <FormGroup className=\"mb-4 active\">\r\n                  <input\r\n                    className=\"rounded-border\"\r\n                    type=\"text\" \r\n                    name=\"question\"\r\n                    placeholder=\"What would you like to ask?\"\r\n                    onChange={ this.handleQuestion } \r\n                  />\r\n                </FormGroup>\r\n\r\n                \r\n                { this.state.choices.map((field, index) => ( \r\n                  <FormGroup key={ index } className=\"mb-4\"> \r\n                    <input\r\n                      className=\"rounded-border active\"\r\n                      type=\"text\" \r\n                      name=\"choice\"\r\n                      maxLength=\"20\"\r\n                      placeholder={`Choice ${index + 1}`}\r\n                      onChange={ event => this.handleChoices(event, index) } \r\n                    /> \r\n                    <span\r\n                      style={{ cursor: 'pointer' }}\r\n                      className=\"ml-5\" \r\n                      onClick={ () => this.removeChoice(index) }>Remove</span>\r\n                  </FormGroup>  \r\n                  ))\r\n                }\r\n              \r\n                <FormGroup>\r\n                  <span \r\n                    style={{ cursor: 'pointer' }} \r\n                    onClick={ this.addChoice }>Add another choice</span>\r\n                </FormGroup>\r\n              <FormGroup>\r\n                <button className=\"btn custom-btn purple-btn\" type=\"submit\">Post</button>        \r\n              </FormGroup>\r\n              \r\n            </Form>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    </motion.div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(null, { addPoll })(NewPollForm)","import './App.css';\nimport './formstyle.css';\nimport './buttons.css';\nimport React from 'react';\nimport { Route, Switch, withRouter } from 'react-router-dom';\nimport { Container } from 'reactstrap';\nimport { AnimatePresence } from 'framer-motion';\nimport { connect } from 'react-redux';\nimport { getPolls } from './redux/actions/polls'\nimport { verifyCurrentUser } from './redux/actions/auth'\nimport { getUsers } from './redux/actions/users'\nimport { transitions, positions, Provider as AlertProvider } from 'react-alert'\nimport AlertTemplate from './components/AlertTemplate'\nimport AlertSystem from './components/AlertSystem'\nimport Home from './components/Home';\nimport Navbar from './components/Navbar';\nimport Login from './components/Login';\nimport Logout from './components/Logout';\nimport Register from './components/Register';\nimport UserProfile from './components/UserProfile';\nimport ProtectedRoute from './components/ProtectedRoute';\nimport PollDetail from './components/polls/PollDetail';\nimport NewPollForm from './components/polls/NewPollForm';\n\nconst options = {\n  position: positions.BOTTOM_CENTER,\n  timeout: 5000,\n  offset: '30px',\n  transition: transitions.SCALE\n}\n\nclass App extends React.Component {\n\n  componentDidMount() {\n    this.props.getPolls()\n    this.props.getUsers()\n    this.props.verifyCurrentUser()\n    console.log('user verified')\n  }\n\n  render() {\n    const { location } = this.props;\n    return (\n      <AlertProvider template={ AlertTemplate } {...options}>\n        <Container>\n          <AlertSystem/>\n          <Navbar/>\n\n          <AnimatePresence exitBeforeEnter initial={false}>\n          \n            <Switch location={ location } key={ location.pathname } >\n              <Route exact path=\"/register\" component={ Register } />\n\n              <Route exact path=\"/logout\" component={ Logout } />\n\n              <Route exact path=\"/login\" component={ Login } />\n\n              <ProtectedRoute exact path=\"/users/:username\" component={ UserProfile } />\n\n              <ProtectedRoute exact path=\"/polls/:id\" component={ PollDetail } /> \n\n              <ProtectedRoute exact path=\"/add-poll\" component={ NewPollForm } />\n\n              <Route exact path=\"/\" component={ Home } />\n            </Switch>\n          \n          </AnimatePresence>\n            \n        </Container>\n      </AlertProvider>\n      \n      )\n    }\n  }\n\nexport default connect(null, { getPolls, verifyCurrentUser, getUsers })(withRouter(App)) ;\n","import { \r\n  GET_POLLS, \r\n  DELETE_POLL, \r\n  ADD_POLL,\r\n  HANDLE_VOTE,\r\n  GET_USER_VOTES,\r\n  GET_USER_LIKES,\r\n  GET_USER_DISLIKES,\r\n  REMOVE_USER_VOTES,\r\n  REMOVE_USER_LIKES,\r\n  REMOVE_USER_DISLIKES,\r\n  DECREMENT_POLL_LIKES,\r\n  INCREMENT_POLL_LIKES,\r\n  INCREMENT_POLL_DISLIKES,\r\n  DECREMENT_POLL_DISLIKES,\r\n  SET_POLL_LIKES_AND_DISLIKES,\r\n\r\n} from '../actions/types.js'\r\n\r\nconst initialState = {\r\n  polls: [],\r\n  pollsLikeCounters: {},\r\n  pollsDislikeCounters: {},\r\n  pollsLiked: {},\r\n  pollsDisliked: {},\r\n  userVotes: [],\r\n  pollLiked: false,\r\n  pollDisliked: false\r\n}\r\n\r\n// poll reducer\r\nexport default function(state = initialState, action) {\r\n  switch(action.type) {\r\n    case GET_POLLS: \r\n      return {\r\n        ...state,\r\n        polls: action.payload,\r\n      }\r\n\r\n    case SET_POLL_LIKES_AND_DISLIKES:\r\n      return {\r\n        ...state,\r\n        pollsLikeCounters: action.payload.reduce((rest, poll) => {\r\n          return {\r\n            ...rest,\r\n            [poll.id]: poll.likes\r\n          }\r\n        }, {}),\r\n        pollsDislikeCounters: action.payload.reduce((rest, poll) => {\r\n          return {\r\n            ...rest,\r\n            [poll.id]: poll.dislikes\r\n          }\r\n        }, {}) \r\n      }\r\n\r\n    case GET_USER_VOTES: \r\n      return {\r\n        ...state,\r\n        userVotes: action.payload\r\n      }\r\n\r\n    case GET_USER_LIKES:\r\n      return {\r\n        ...state, \r\n        pollsLiked: action.payload.reduce((rest, like) => {\r\n          return {\r\n            ...rest,\r\n            [like.poll]: true\r\n          }\r\n        }, {})\r\n      }\r\n\r\n    case GET_USER_DISLIKES:\r\n      return {\r\n        ...state, \r\n        pollsDisliked: action.payload.reduce((rest, dislike) => {\r\n          return {\r\n            ...rest,\r\n            [dislike.poll]: true\r\n          }\r\n        }, {})\r\n      }\r\n\r\n    case REMOVE_USER_VOTES:\r\n      return {\r\n        ...state,\r\n        userVotes: []\r\n      }\r\n\r\n    case REMOVE_USER_LIKES:\r\n      return {\r\n        ...state,\r\n        pollsLiked: {}\r\n      }\r\n\r\n    case REMOVE_USER_DISLIKES:\r\n      return {\r\n        ...state,\r\n        pollsDisliked: {}\r\n      }\r\n\r\n    case DELETE_POLL:\r\n      return {\r\n        ...state,\r\n        polls: [ ...state.polls.filter(poll => poll.id !== action.payload) ]\r\n      }\r\n\r\n    case ADD_POLL:\r\n      return {\r\n        ...state,\r\n        polls: [ action.payload, ...state.polls ]\r\n      }\r\n\r\n    case HANDLE_VOTE:\r\n      return {\r\n        ...state,\r\n        polls: state.polls.map(poll => poll.id === action.payload.poll.id ? action.payload.poll : poll),\r\n        userVotes: [ action.payload.vote, ...state.userVotes ]\r\n      }\r\n\r\n    case INCREMENT_POLL_LIKES:\r\n      return {\r\n        ...state,\r\n        pollsLikeCounters: {\r\n          ...state.pollsLikeCounters,\r\n          [action.payload]: state.pollsLikeCounters[action.payload] + 1\r\n        },\r\n        pollsLiked: {\r\n          ...state.pollsLiked,\r\n          [action.payload]: true\r\n        }\r\n      }\r\n\r\n    case DECREMENT_POLL_LIKES:\r\n      return {\r\n        ...state, \r\n        pollsLikeCounters: {\r\n          ...state.pollsLikeCounters,\r\n          [action.payload]: state.pollsLikeCounters[action.payload] - 1\r\n        },\r\n        pollsLiked: {\r\n          ...state.pollsLiked,\r\n          [action.payload]: undefined\r\n        }\r\n      }\r\n\r\n    case INCREMENT_POLL_DISLIKES:\r\n      return {\r\n        ...state, \r\n        pollsDislikeCounters: {\r\n          ...state.pollsDislikeCounters,\r\n          [action.payload]: state.pollsDislikeCounters[action.payload] + 1\r\n        },\r\n        pollsDisliked: {\r\n          ...state.pollsDisliked,\r\n          [action.payload]: true\r\n        }\r\n      }\r\n\r\n    case DECREMENT_POLL_DISLIKES:\r\n      return {\r\n        ...state,\r\n        pollsDislikeCounters: {\r\n          ...state.pollsDislikeCounters,\r\n          [action.payload]: state.pollsDislikeCounters[action.payload] - 1\r\n        },\r\n        pollsDisliked: {\r\n          ...state.pollsDisliked,\r\n          [action.payload]: undefined\r\n        }\r\n      }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}","import { \r\n  GET_COMMENTS, \r\n  ADD_COMMENT,\r\n  GET_USER_COMMENT_LIKES,\r\n  GET_USER_COMMENT_DISLIKES,\r\n  INCREMENT_COMMENT_LIKES,\r\n  DECREMENT_COMMENT_LIKES,\r\n  INCREMENT_COMMENT_DISLIKES,\r\n  DECREMENT_COMMENT_DISLIKES,\r\n  SET_COMMENT_LIKES_AND_DISLIKES\r\n\r\n} from '../actions/types.js'\r\n\r\nconst initialState = {\r\n  comments: [],\r\n  commentsLikeCounters: {},\r\n  commentsDislikeCounters: {},\r\n  commentsLiked: {},\r\n  commentsDisliked: {}\r\n  \r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n  switch(action.type) {\r\n\r\n    case GET_COMMENTS:\r\n      let comments = action.payload\r\n      return {\r\n        ...state,\r\n        comments: comments\r\n      }\r\n\r\n    case SET_COMMENT_LIKES_AND_DISLIKES:\r\n      return {\r\n        ...state,\r\n        commentsLikeCounters: action.payload.reduce((rest, comment) => {\r\n          return {\r\n            ...rest,\r\n            [comment.id]: comment.likes\r\n          }\r\n        }, {}),\r\n        \r\n        commentsDislikeCounters: action.payload.reduce((rest, comment) => {\r\n          return {\r\n            ...rest, \r\n            [comment.id]: comment.dislikes\r\n          }\r\n        }, {}),\r\n      }\r\n\r\n    case ADD_COMMENT:\r\n      return {\r\n        ...state,\r\n        comments: [ action.payload, ...state.comments ]\r\n      }\r\n\r\n    case GET_USER_COMMENT_LIKES:\r\n      return {\r\n        ...state, \r\n        commentsLiked: action.payload.reduce((rest, like) => {\r\n          return {\r\n            ...rest,\r\n            [like.comment]: true \r\n          }\r\n        }, {})\r\n      }\r\n\r\n    case GET_USER_COMMENT_DISLIKES:\r\n      return { \r\n        ...state, \r\n        commentsDisliked: action.payload.reduce((rest, dislike) => {\r\n          return {\r\n            ...rest,\r\n            [dislike.comment]: true \r\n          } \r\n        }, {})\r\n      }\r\n\r\n    case INCREMENT_COMMENT_LIKES:\r\n      return {\r\n        ...state,\r\n        commentsLikeCounters: {\r\n          ...state.commentsLikeCounters,\r\n          [action.payload]: state.commentsLikeCounters[action.payload] + 1\r\n        },\r\n        commentsLiked: {\r\n          ...state.commentsLiked,\r\n          [action.payload]: true\r\n        } \r\n      }\r\n\r\n    case DECREMENT_COMMENT_LIKES:\r\n      return {\r\n        ...state,\r\n        commentsLikeCounters: {\r\n          ...state.commentsLikeCounters,\r\n          [action.payload]: state.commentsLikeCounters[action.payload] - 1\r\n        },\r\n        commentsLiked: {\r\n          ...state.commentsLiked,\r\n          [action.payload]: undefined\r\n        } \r\n      }\r\n\r\n    case INCREMENT_COMMENT_DISLIKES:\r\n      return {\r\n        ...state,\r\n        commentsDislikeCounters: {\r\n          ...state.commentsDislikeCounters,\r\n          [action.payload]: state.commentsDislikeCounters[action.payload] + 1\r\n        },\r\n        commentsDisliked: {\r\n          ...state.commentsDisliked,\r\n          [action.payload]: true\r\n        } \r\n      }\r\n\r\n    case DECREMENT_COMMENT_DISLIKES:\r\n      return {\r\n        ...state,\r\n        commentsDislikeCounters: {\r\n          ...state.commentsDislikeCounters,\r\n          [action.payload]: state.commentsDislikeCounters[action.payload] - 1\r\n        },\r\n        commentsDisliked: {\r\n          ...state.commentsDisliked,\r\n          [action.payload]: undefined\r\n        } \r\n      }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}","import {\r\n  USER_AUTHENTICATED,\r\n  HANDLE_LOGIN,\r\n  HANDLE_LOGOUT,\r\n\r\n} from '../actions/types.js'\r\n\r\n\r\nconst initialState = {\r\n  user: '',\r\n  isAuthenticated: localStorage.getItem('accessToken') ? true : false\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n  switch(action.type) {\r\n    case USER_AUTHENTICATED:\r\n      return {\r\n        ...state,\r\n        isAuthenticated: true,\r\n        user: action.payload\r\n      }\r\n\r\n    case HANDLE_LOGIN:\r\n      return {\r\n        ...state,\r\n        isAuthenticated: true,\r\n        user: action.payload\r\n      }\r\n\r\n    case HANDLE_LOGOUT:\r\n      return {\r\n        ...state, \r\n        isAuthenticated: false, \r\n        user: ''\r\n      }\r\n\r\n  default:\r\n    return state;\r\n  }\r\n\r\n\r\n}","import { GET_USERS, ADD_NEW_USER } from '../actions/types.js';\r\n\r\nconst initialState = {\r\n  users: []\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n  switch(action.type) {\r\n    case GET_USERS:\r\n      return {\r\n        ...state,\r\n        users: action.payload\r\n      }\r\n\r\n    case ADD_NEW_USER:\r\n      return {\r\n        ...state,\r\n        users: [ action.payload, ...state.users ]\r\n      }\r\n\r\n  default: \r\n    return state\r\n  }\r\n} ","import { CREATE_MESSAGE } from '../actions/types'\r\n\r\nconst initialState = {}\r\n\r\nexport default function(state = initialState, action) {\r\n  switch(action.type) {\r\n    case CREATE_MESSAGE: \r\n      return (state = action.payload)\r\n\r\n  default:\r\n    return state;\r\n  }\r\n}","import { GET_ERRORS } from '../actions/types'\r\n\r\nconst initialState = {\r\n  message: {},\r\n  status: null\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n  switch(action.type) {\r\n    case GET_ERRORS:\r\n      return {\r\n        ...state,\r\n        message: action.payload.data,\r\n        status: action.payload.status\r\n      }\r\n\r\n  default:\r\n    return state\r\n  }\r\n}","import { combineReducers } from 'redux';\r\nimport polls from './polls';\r\nimport comments from './comments';\r\nimport auth from './auth';\r\nimport users from './users';\r\nimport messages from './messages';\r\nimport errors from './errors'\r\n\r\nexport default combineReducers({ \r\n  polls,\r\n  comments,\r\n  auth, \r\n  users,\r\n  messages,\r\n  errors\r\n  \r\n})","import { createStore, applyMiddleware } from 'redux';\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers/rootReducer'\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  composeWithDevTools(applyMiddleware(...middleware))\r\n)\r\n\r\nexport default store;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport store from './redux/store';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Provider store={ store }>\n        <App />\n      </Provider>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}