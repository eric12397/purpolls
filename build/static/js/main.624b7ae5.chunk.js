(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);a(66),a(67);var n=a(1),o=a.n(n),l=a(22),s=a.n(l),r=a(12),c=a(11),i=a(5),u=a(6),p=a(8),m=a(7),d=(a(76),a(77),a(78),a(14)),h=a(119),E=a(18),b=a(19),f=a.n(b),v="http://localhost:8000/api/",g=f.a.create({baseURL:v,timeout:5e3,headers:{Authorization:localStorage.getItem("accessToken")?"Bearer "+localStorage.getItem("accessToken"):null,"Content-Type":"application/json",Accept:"application/json"}});g.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;if(401===e.response.status&&t.url===v+"token/refresh/")return window.location.href="/login",Promise.reject(e);if("token_not_valid"===e.response.data.code&&401===e.response.status&&"Unauthorized"===e.response.statusText){var a=localStorage.getItem("refreshToken");if(a){var n=JSON.parse(atob(a.split(".")[1])),o=Math.ceil(Date.now()/1e3);if(console.log(n.exp),console.log(o),n.exp>o)return g.post("/token/refresh/",{refresh:a}).then((function(e){return localStorage.setItem("accessToken",e.data.access),localStorage.setItem("refreshToken",e.data.refresh),g.defaults.headers.Authorization="Bearer "+e.data.access,t.headers.Authorization="Bearer "+e.data.access,g(t)})).catch((function(e){console.log(e)}));console.log("Refresh token is expired",n.exp,o),window.location.href="/login"}else console.log("Refresh token not available. Log back in!"),window.location.href="/login"}return Promise.reject(e)}));var O=g,y=function(e){return{type:"CREATE_MESSAGE",payload:e}},k=function(e){return{type:"GET_ERRORS",payload:e}},j=function(e){return{type:"SET_POLL_LIKES_AND_DISLIKES",payload:e}},C=function(e){return function(t){f.a.get("http://localhost:8000/api/users/".concat(e,"/votes/")).then((function(e){t({type:"GET_USER_VOTES",payload:e.data})})).catch((function(e){return console.log(e)}))}},L=function(e){return function(t){f.a.get("http://localhost:8000/api/users/".concat(e,"/likes/")).then((function(e){t({type:"GET_USER_LIKES",payload:e.data})}))}},S=function(e){return function(t){f.a.get("http://localhost:8000/api/users/".concat(e,"/dislikes/")).then((function(e){t({type:"GET_USER_DISLIKES",payload:e.data})}))}},N=a(32),_=a(3),D=a(57),I=a(58),x={backgroundColor:"#1f2120",fontSize:"14px",color:"#e1e1e1",padding:" 10px",borderRadius:"3px",display:"flex",textAlign:"center",justifyContent:"space-between",alignItems:"center",boxShadow:"3px 3px 8px black",width:"500px",boxSizing:"border-box"},T={marginLeft:"10px",border:"none",backgroundColor:"transparent",cursor:"pointer",color:"#FFFFFF"},M={fontSize:"30px",color:"#5bd0de"},w={fontSize:"30px",color:"red"},R=function(e){var t=e.style,a=e.options,n=e.message,l=e.close;return o.a.createElement("div",{style:Object(_.a)(Object(_.a)({},x),t)},"info"===a.type&&"!","success"===a.type&&o.a.createElement(D.a,{style:M}),"error"===a.type&&o.a.createElement(I.a,{style:w}),o.a.createElement("span",{style:{marginLeft:"10px"}}," ",n," "),o.a.createElement("button",{onClick:l,style:T},"x"))},A=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.error,n=t.message,o=t.alert;a!==e.error&&(a.message.username&&o.error("Username: ".concat(a.message.username)),a.message.password&&o.error("Password: ".concat(a.message.password)),a.message.email&&o.error("Email: ".concat(a.message.email)),a.message.detail&&o.error("Username and/or password is incorrect!"),a.message.question_text&&o.error("Question field is empty!"),a.message.choices&&o.error("Answer fields are empty!"),a.message.comment_text&&o.error("Comment field is empty!")),n!==e.message&&(n.loginSuccess&&o.success(n.loginSuccess),n.registerSuccess&&o.success(n.registerSuccess),n.pollCreated&&o.success(n.pollCreated),n.pollDeleted&&o.success(n.pollDeleted))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null)}}]),a}(o.a.Component),P=Object(c.b)((function(e){return{error:e.errors,message:e.messages}}))(Object(N.d)()(A)),U=a(29),K=a.n(U),V=a(36),z=(a(97),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).handleVote=function(){var t=e.props.choice.id,a=e.props,n=a.pollId,o=a.history;e.props.handleVote(t,n,o)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.choice,t=e.choice_text,a=e.percent;return o.a.createElement("div",{style:{border:this.props.vote?"0px":"2px solid #943dff"},className:"choice-btn ".concat(this.props.vote?"":"choice-btn-hover"),"data-label":t,onClick:this.handleVote},o.a.createElement("span",{style:{width:this.props.vote?"".concat(a,"%"):""},className:"bar"}),o.a.createElement("p",{className:"percent"},this.props.vote?"".concat(a,"%"):""))}}]),a}(o.a.Component)),G=Object(c.b)(null,{handleVote:function(e,t,a){return function(n,o){var l=o().auth,s=l.user;!0===l.isAuthenticated?O.post("/polls/".concat(t,"/votes/"),{selected_choice_id:e,user_id:s.id}).then((function(e){n({type:"HANDLE_VOTE",payload:e.data})})).catch((function(e){return console.log(e)})):(n(y({logInFirst:"You must log in to vote!"})),a.push("/login"))}}})(Object(d.g)(z)),F=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return this.props.choices.map((function(t){return o.a.createElement(G,{key:t.id,choice:t,pollId:e.props.pollId,vote:e.props.vote})}))}}]),a}(o.a.Component),H=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.vote!==e.vote}},{key:"componentDidUpdate",value:function(e){this.props.vote!==e.vote&&console.log("Poll ".concat(this.props.poll.id," updated!"))}},{key:"render",value:function(){for(var e=this.props.poll,t=e.question_text,a=e.date_posted,n=e.total_comments,l=e.author,s=e.id,c=this.props.poll.choices,i=0,u=0;u<c.length;u++)i+=c[u].votes;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"article-metadata"},o.a.createElement("small",{className:"text-muted"},"posted by"),o.a.createElement(r.b,{to:"/users/".concat(this.props.user.username),className:"pl-1"},l),o.a.createElement("small",{className:"pl-2 text-muted"},K()(a).fromNow())),o.a.createElement("h1",null,o.a.createElement(r.b,{to:"/polls/".concat(s)},t)),o.a.createElement(F,{pollId:s,choices:this.props.poll.choices,vote:this.props.vote}),o.a.createElement("div",{style:{float:"left"}},o.a.createElement("small",null,"Total Votes: ",i)),o.a.createElement("div",{style:{float:"right"}},o.a.createElement(r.b,{className:"mr-2",to:"/polls/".concat(s)},o.a.createElement(V.a,null)),o.a.createElement("small",null,n.toLocaleString())))}}]),a}(o.a.Component),B=Object(c.b)((function(e,t){return{user:e.users.users.find((function(e){return e.username===t.poll.author})),vote:e.polls.userVotes.some((function(e){return e.poll===t.poll.id}))}}))(H),q=a(112),W=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=[];return this.props.polls.forEach((function(t){e.push(o.a.createElement(q.a,{key:t.id,className:"content-section mb-4"},o.a.createElement(B,{poll:t})))})),o.a.createElement("div",{className:"card-columns"},e)}}]),a}(o.a.Component),Y=Object(c.b)((function(e){return{polls:e.polls.polls}}))(W),J=a(120),Q=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e="";return void 0!==this.props.location.state&&(e=o.a.createElement(J.a,{className:"alert"},this.props.location.state.message)),o.a.createElement(E.b.div,{animate:{opacity:1,y:0},exit:{opacity:0,y:"100vh"},transition:$},e,o.a.createElement(Y,null))}}]),a}(o.a.Component),$={transition:"linear"},X=Q,Z=a(63),ee=a(113),te=a(114),ae=Object(c.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,username:e.auth.user.username}}))((function(e){var t=Object(n.useState)(!1),a=Object(Z.a)(t,2),l=a[0],s=a[1],c=function(){return s(!l)},i=o.a.createElement("header",{className:"site-header mb-3"},o.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-steel fixed-top"},o.a.createElement("div",{className:"container"},o.a.createElement(r.b,{to:"/",className:"navbar-brand brand-text mr-3"},"purpolls"),o.a.createElement(ee.a,{onClick:c}),o.a.createElement(te.a,{isOpen:l,navbar:!0},o.a.createElement("div",{className:"navbar-nav ml-auto"},o.a.createElement(r.b,{to:"/",className:"nav-item nav-link"},"Home"),o.a.createElement(r.b,{to:"/add-poll",className:"nav-item nav-link"},"New Poll"),o.a.createElement(r.b,{to:"/users/".concat(e.username),className:"nav-item nav-link"},"Profile"),o.a.createElement(r.b,{to:"/logout",className:"nav-item nav-link"},"Log Out")))))),u=o.a.createElement("header",{className:"site-header mb-3"},o.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-steel fixed-top"},o.a.createElement("div",{className:"container"},o.a.createElement(r.b,{to:"/",className:"navbar-brand brand-text mr-3"},"purpolls"),o.a.createElement(ee.a,{onClick:c}),o.a.createElement(te.a,{isOpen:l,navbar:!0},o.a.createElement("div",{className:"navbar-nav ml-auto"},o.a.createElement(r.b,{to:"/",className:"nav-item nav-link"},"Home"),o.a.createElement(r.b,{to:"/register",className:"nav-item nav-link"},"Register"),o.a.createElement(r.b,{to:"/login",className:"nav-item nav-link"},"Log In"))))));return o.a.createElement("div",null,e.isAuthenticated?i:u)})),ne=a(115),oe=a(116),le=a(117),se=a(118),re=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={username:"",password:""},e.handleSubmit=function(t){t.preventDefault(),e.props.handleLogin(e.state,e.props.history)},e.handleChange=function(t){var a=t.target.name,n=t.target.value;e.setState((function(e){var t=e;return t[a]=n,t}))},e}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(E.b.div,{initial:{opacity:0,x:"-100vh"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100vh"},transition:{transition:"linear"}},o.a.createElement(ne.a,null,o.a.createElement(oe.a,{sm:"12",md:{size:6,offset:3}},o.a.createElement(le.a,{className:"form-container",method:"post",onSubmit:this.handleSubmit},o.a.createElement("legend",{className:"mb-4"},"Log In"),o.a.createElement(se.a,null,o.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:this.handleChange})),o.a.createElement(se.a,null,o.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleChange})),o.a.createElement(se.a,null,o.a.createElement("button",{style:{margin:"20px auto"},className:"btn custom-btn purple-btn",type:"submit"},"Login")),o.a.createElement("small",{className:"text-muted"},"Need An Account?",o.a.createElement(r.b,{className:"ml-2",to:"/register"},"Sign Up Now"))))))}}]),a}(o.a.Component),ce=Object(c.b)(null,{handleLogin:function(e,t){return function(a,n){O.post("/token/obtain/",{username:e.username,password:e.password}).then((function(e){a({type:"HANDLE_LOGIN",payload:e.data});var o=n().auth.user,l=o.id,s=o.username;a(y({loginSuccess:"Welcome ".concat(s,"! You have successfully logged in.")})),a(C(l)),a(L(l)),a(S(l)),O.defaults.headers.Authorization="Bearer "+e.data.access,localStorage.setItem("accessToken",e.data.access),localStorage.setItem("refreshToken",e.data.refresh),t.push("/")})).catch((function(e){return a(k(e.response))}))}}})(re),ie=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.handleLogout()}},{key:"render",value:function(){return o.a.createElement(E.b.div,{initial:{opacity:0,x:"-100vh"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100vh"}},o.a.createElement("h2",null,"You have been logged out"),o.a.createElement("div",{className:"border-top pt-3"},o.a.createElement("small",{className:"text-muted"},o.a.createElement(r.b,{to:"/login"},"Log In Again"))))}}]),a}(o.a.Component),ue=Object(c.b)(null,{handleLogout:function(){return function(e){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e({type:"HANDLE_LOGOUT"}),e({type:"REMOVE_USER_VOTES"}),e({type:"REMOVE_USER_LIKES"}),e({type:"REMOVE_USER_DISLIKES"})}}})(ie),pe=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={username:"",email:"",password:""},e.handleSubmit=function(t){t.preventDefault(),e.props.handleRegistration(e.state,e.props.history)},e.handleChange=function(t){var a=t.target.name,n=t.target.value;e.setState((function(e){var t=e;return t[a]=n,t}))},e}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(E.b.div,{initial:{opacity:0,x:"-100vh"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100vh"},transition:{transition:"linear"}},o.a.createElement(ne.a,null,o.a.createElement(oe.a,{sm:"12",md:{size:6,offset:3}},o.a.createElement(le.a,{className:"form-container",method:"POST",onSubmit:this.handleSubmit},o.a.createElement("legend",{className:"mb-4"},"Register for a new account!"),o.a.createElement(se.a,null,o.a.createElement("input",{autoComplete:"new-password",type:"text",name:"username",placeholder:"Username",onChange:this.handleChange})),o.a.createElement(se.a,null,o.a.createElement("input",{autoComplete:"new-password",type:"text",name:"email",placeholder:"Email",onChange:this.handleChange})),o.a.createElement(se.a,null,o.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleChange})),o.a.createElement(se.a,null,o.a.createElement("button",{style:{margin:"20px auto"},className:"btn custom-btn purple-btn",type:"submit"},"Sign Up")),o.a.createElement("small",{className:"text-muted"},"Already Have An Account?",o.a.createElement(r.b,{className:"ml-2",to:"/login"},"Log In"))))))}}]),a}(o.a.Component),me=Object(c.b)(null,{handleRegistration:function(e,t){return function(a){O.post("/register/",{username:e.username,email:e.email,password:e.password}).then((function(e){var n;a((n=e.data,function(e){e({type:"ADD_NEW_USER",payload:n})})),a(y({registerSuccess:"Your account has been created successfully! Log in now to start polling!"})),t.push("/login")})).catch((function(e){return a(k(e.response))}))}}})(pe),de=a(59),he=a(17),Ee=a(31),be=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).handleChange=function(t){e.props.uploadImage(t)},e}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{for:"profile-pic-upload",style:fe},o.a.createElement(Ee.c,{style:{fontSize:"1.5rem"}})),o.a.createElement("input",{id:"profile-pic-upload",type:"file",onChange:this.handleChange}))}}]),a}(o.a.Component),fe={display:"inline-block",cursor:"pointer"},ve=be,ge=(a(106),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.text;return o.a.createElement("div",{"tooltip-text":"".concat(e)},this.props.children)}}]),a}(o.a.Component)),Oe=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={image:null},e.uploadImage=function(t){console.log(t.target.files);var a=new FormData;a.append("image",t.target.files[0]);var n=e.props.match.params.username;f.a.put("http://localhost:8000/api/users/".concat(n,"/profile-pic-upload/"),a,{headers:{Authorization:localStorage.getItem("accessToken")?"Bearer "+localStorage.getItem("accessToken"):null,accept:"application/json","content-type":"multipart/form-data"}}).then((function(t){console.log(t.data),e.setState({image:t.data.image})})).catch((function(e){return console.log(e)}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.username;f.a.get("http://localhost:8000/api/users/".concat(t,"/profile-pic-upload/"),{headers:{Authorization:localStorage.getItem("accessToken")?"Bearer "+localStorage.getItem("accessToken"):null,accept:"application/json","content-type":"multipart/form-data"}}).then((function(t){return e.setState({image:t.data.image})}))}},{key:"render",value:function(){var e=this.props.userPolls.length,t=0;this.props.userPolls.map((function(e,a){for(var n=0;n<e.choices.length;n++)t+=e.choices[n].votes;t+=e.likes,t+=e.total_comments,t-=e.dislikes}));var a=this.props.userProfile&&this.state.image?o.a.createElement(ne.a,null,o.a.createElement(oe.a,{lg:"4"},o.a.createElement("div",{className:"content-section"},o.a.createElement("div",{className:"media article-metadata"},o.a.createElement("img",{className:"rounded-circle account-img",src:"http://localhost:8000"+this.state.image}),o.a.createElement("div",{className:"media-body mt-3",style:{overflow:"hidden"}},o.a.createElement("h2",{className:"account-heading"},this.props.userProfile.username),o.a.createElement("p",{className:"text-secondary"},this.props.userProfile.email),this.props.userProfile.username===this.props.loggedInUser.username?o.a.createElement(ve,{uploadImage:this.uploadImage}):"")),o.a.createElement("div",{style:ke},o.a.createElement("small",null,"Polls"),o.a.createElement("div",null,o.a.createElement(Ee.b,null),o.a.createElement("small",{className:"ml-1"},e.toLocaleString()))),o.a.createElement("div",{style:ke},o.a.createElement("small",null,"Renown"),o.a.createElement(ge,{text:"Renown Score = Votes + Likes - Dislikes + Comments"},o.a.createElement("div",null,o.a.createElement(Ee.a,null),o.a.createElement("small",{className:"ml-1"},t.toLocaleString())))),o.a.createElement("div",{style:ke},o.a.createElement("small",null,"Date joined"),o.a.createElement("div",null,o.a.createElement(he.e,null),o.a.createElement("small",{className:"ml-1"},K()(this.props.userProfile.date_joined).format("LL")))))),o.a.createElement(oe.a,{lg:"8"},o.a.createElement("div",{className:"content-section"},o.a.createElement("h2",{className:"mb-3"},"Your Polls"),this.props.userPolls.map((function(e,t){for(var a=0,n=0;n<e.choices.length;n++)a+=e.choices[n].votes;return o.a.createElement("div",{className:"article-metadata",key:t},o.a.createElement("div",{style:{padding:"5px"}},o.a.createElement(r.b,{to:"/polls/".concat(e.id)},o.a.createElement("h5",null,e.question_text)),o.a.createElement("div",{style:ye},o.a.createElement("small",null,"Votes"),o.a.createElement("div",null,o.a.createElement(de.a,{style:{color:"#9365a3"}}),o.a.createElement("small",{className:"ml-1"},a.toLocaleString()))),o.a.createElement("div",{style:ye},o.a.createElement("small",null,"Likes"),o.a.createElement("div",null,o.a.createElement(he.b,{style:{color:"#9365a3"}}),o.a.createElement("small",{className:"ml-1"},e.likes.toLocaleString()))),o.a.createElement("div",{style:ye},o.a.createElement("small",null,"Dislikes"),o.a.createElement("div",null,o.a.createElement(he.a,{style:{color:"#9365a3"}}),o.a.createElement("small",{className:"ml-1"},e.dislikes.toLocaleString()))),o.a.createElement("div",{style:ye},o.a.createElement("small",null,"Comments"),o.a.createElement("div",null,o.a.createElement(V.a,{style:{color:"#9365a3"}}),o.a.createElement("small",{className:"ml-2"},e.total_comments.toLocaleString())))))}))))):o.a.createElement("div",null," Loading... please wait. ");return o.a.createElement(E.b.div,{initial:{opacity:0,x:"-100vh"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100vh"},transition:{transition:"linear"}},a)}}]),a}(o.a.Component),ye={display:"inline-block",marginRight:"40px"},ke={display:"inline-block",marginRight:"25px"},je=Object(c.b)((function(e,t){var a=t.match.params.username;return{userProfile:e.users.users.find((function(e){return e.username===a})),userPolls:e.polls.polls.filter((function(e){return e.author===a})),loggedInUser:e.auth.user}}))(Oe),Ce=a(64),Le=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(Ce.a)(t,["component"]);return o.a.createElement(d.b,Object.assign({},n,{render:function(t){return e.props.isAuthenticated?o.a.createElement(a,t):o.a.createElement(E.b.div,{initial:{opacity:0,x:"-100vh"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100vh"}},o.a.createElement(d.a,{to:"/login"}))}}))}}]),a}(o.a.Component),Se=Object(c.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))(Le),Ne=function(e){return{type:"SET_COMMENT_LIKES_AND_DISLIKES",payload:e}},_e=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={comment:""},e.handleComment=function(t){e.setState({comment:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var a=e.props.pollId;e.props.addComment(a,e.state),e.setState({comment:""})},e}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(le.a,{className:"comment-form",onSubmit:this.handleSubmit},o.a.createElement(se.a,null,o.a.createElement("textarea",{className:"rounded-border",placeholder:"Add a comment",value:this.state.comment,onChange:this.handleComment})),o.a.createElement(se.a,null,o.a.createElement("button",{className:"btn custom-btn purple-btn",type:"submit"},"Comment")))}}]),a}(o.a.Component),De=Object(c.b)(null,{addComment:function(e,t){return function(a,n){var o=n().auth.user.id;O.post("http://localhost:8000/api/polls/".concat(e,"/comments/"),{poll_id:e,author:o,comment_text:t.comment}).then((function(e){a({type:"ADD_COMMENT",payload:e.data});var t=n().comments.comments;a(Ne(t))})).catch((function(e){return a(k(e.response))}))}}})(_e),Ie=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).handleClick=function(){e.props.toggleLike()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.likes;return o.a.createElement(o.a.Fragment,null,o.a.createElement(he.b,{className:"hover active",style:{color:this.props.commentLiked?"#943dff":"grey"},onClick:this.handleClick}),o.a.createElement("span",{style:xe},e))}}]),a}(o.a.Component),xe={fontSize:"12px",color:"e1e1e1",marginLeft:"6px"},Te=Ie,Me=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).handleClick=function(){e.props.toggleDislike()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.dislikes;return o.a.createElement(o.a.Fragment,null,o.a.createElement(he.a,{className:"ml-3 hover active",style:{color:this.props.commentDisliked?"#943dff":"grey"},onClick:this.handleClick}),o.a.createElement("span",{className:"pl-2",style:{fontSize:"12px"}},e))}}]),a}(o.a.Component),we=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).toggleLike=function(){var t=e.props.comment,a=t.id,n=t.poll_id;e.props.toggleCommentLike(a,n)},e.toggleDislike=function(){var t=e.props.comment,a=t.id,n=t.poll_id;e.props.toggleCommentDislike(a,n)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.comment,t=e.comment_text,a=e.date_posted,n=e.author;return o.a.createElement("div",{className:"article-metadata"},o.a.createElement(r.b,{to:"/users/".concat(n),className:"mr-1"},n),o.a.createElement("small",{className:"text-muted"},K()(a).fromNow()),o.a.createElement("p",{style:Re,className:"mt-1"},t),o.a.createElement("div",{style:Ae},o.a.createElement(Te,{comment:this.props.comment,likes:this.props.likes,commentLiked:this.props.commentLiked,toggleLike:this.toggleLike}),o.a.createElement(Me,{comment:this.props.comment,dislikes:this.props.dislikes,commentDisliked:this.props.commentDisliked,toggleDislike:this.toggleDislike})))}}]),a}(o.a.Component),Re={fontSize:"15px",fontFamily:"Arial, sans-serif",fontWeight:"500"},Ae={position:"relative",bottom:"12px"},Pe=Object(c.b)((function(e,t){var a=parseInt(t.comment.id);return{likes:e.comments.commentsLikeCounters[a],dislikes:e.comments.commentsDislikeCounters[a],commentLiked:e.comments.commentsLiked[a],commentDisliked:e.comments.commentsDisliked[a]}}),{toggleCommentLike:function(e,t){return function(a,n){var o=n().auth.user.id,l=n().comments,s=l.commentsLiked,r=l.commentsDisliked,c=l.commentsLikeCounters,i=l.commentsDislikeCounters,u=s[e],p=r[e];void 0===u&&void 0===p&&(O.patch("http://localhost:8000/api/comments/".concat(e,"/likes/"),{signal:"add like",user_id:o,poll_id:t,likes:c[e]+1}).then((function(e){return console.log(e.data)})),a({type:"INCREMENT_COMMENT_LIKES",payload:e})),!0===u&&void 0===p&&(O.patch("http://localhost:8000/api/comments/".concat(e,"/likes/"),{signal:"remove like",user_id:o,poll_id:t,likes:c[e]-1}).then((function(e){return console.log(e.data)})),a({type:"DECREMENT_COMMENT_LIKES",payload:e})),void 0===u&&!0===p&&(O.patch("http://localhost:8000/api/comments/".concat(e,"/likes/"),{signal:"add like, remove dislike",user_id:o,poll_id:t,likes:c[e]+1,dislikes:i[e]-1}).then((function(e){return console.log(e.data)})),a({type:"INCREMENT_COMMENT_LIKES",payload:e}),a({type:"DECREMENT_COMMENT_DISLIKES",payload:e}))}},toggleCommentDislike:function(e,t){return function(a,n){var o=n().auth.user.id,l=n().comments,s=l.commentsLiked,r=l.commentsDisliked,c=l.commentsLikeCounters,i=l.commentsDislikeCounters,u=s[e],p=r[e];void 0===u&&void 0===p&&(O.patch("http://localhost:8000/api/comments/".concat(e,"/dislikes/"),{signal:"add dislike",user_id:o,poll_id:t,dislikes:i[e]+1}).then((function(e){return console.log(e.data)})),a({type:"INCREMENT_COMMENT_DISLIKES",payload:e})),void 0===u&&!0===p&&(O.patch("http://localhost:8000/api/comments/".concat(e,"/dislikes/"),{signal:"remove dislike",user_id:o,poll_id:t,dislikes:i[e]-1}).then((function(e){return console.log(e.data)})),a({type:"DECREMENT_COMMENT_DISLIKES",payload:e})),!0===u&&void 0===p&&(O.patch("http://localhost:8000/api/comments/".concat(e,"/dislikes/"),{signal:"add dislike, remove like",user_id:o,poll_id:t,dislikes:i[e]+1,likes:c[e]-1}).then((function(e){return console.log(e.data)})),a({type:"INCREMENT_COMMENT_DISLIKES",payload:e}),a({type:"DECREMENT_COMMENT_LIKES",payload:e}))}}})(we),Ue=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.pollId;this.props.getComments(e),this.props.getUserCommentLikes(e),this.props.getUserCommentDislikes(e)}},{key:"render",value:function(){var e=this;return this.props.comments.map((function(t){return o.a.createElement(Pe,{key:t.id,comment:t,userCommentLikes:e.props.userCommentLikes,userCommentDislikes:e.props.userCommentDislikes})}))}}]),a}(o.a.Component),Ke=Object(c.b)((function(e){return{comments:e.comments.comments,userCommentLikes:e.comments.userCommentLikes,userCommentDislikes:e.comments.userCommentDislikes}}),{getComments:function(e){return function(t,a){f.a.get("http://localhost:8000/api/polls/".concat(e,"/comments/")).then((function(e){t({type:"GET_COMMENTS",payload:e.data});var n=a().comments.comments;t(Ne(n))})).catch((function(e){return console.log(e)}))}},getUserCommentLikes:function(e){return function(t,a){var n=a().auth.user.id;f.a.get("http://localhost:8000/api/users/".concat(n,"/polls/").concat(e,"/comment-likes/")).then((function(e){t({type:"GET_USER_COMMENT_LIKES",payload:e.data})})).catch((function(e){return console.log(e)}))}},getUserCommentDislikes:function(e){return function(t,a){var n=a().auth.user.id;f.a.get("http://localhost:8000/api/users/".concat(n,"/polls/").concat(e,"/comment-dislikes/")).then((function(e){t({type:"GET_USER_COMMENT_DISLIKES",payload:e.data})})).catch((function(e){return console.log(e)}))}}})(Ue),Ve=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).handleClick=function(){e.props.toggleLike()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.likes,a=e.pollLiked;return o.a.createElement(o.a.Fragment,null,o.a.createElement(he.b,{className:"hover active",style:{color:a?"#943dff":"grey"},onClick:this.handleClick}),o.a.createElement("span",{className:"pl-2",style:{fontSize:"12px"}},t))}}]),a}(o.a.Component),ze=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).handleClick=function(){e.props.toggleDislike()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.dislikes,a=e.pollDisliked;return o.a.createElement(o.a.Fragment,null,o.a.createElement(he.a,{className:"ml-3 hover active",style:{color:a?"#943dff":"grey"},onClick:this.handleClick}),o.a.createElement("span",{className:"pl-2",style:{fontSize:"12px"}},t))}}]),a}(o.a.Component),Ge=(a(107),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).closeModal=function(){e.props.closeModal()},e}return Object(u.a)(a,[{key:"render",value:function(){return this.props.showModal?o.a.createElement("div",{className:"modal-wrapper"},o.a.createElement("div",{className:"modal-backdrop",onClick:this.closeModal}),o.a.createElement("div",{className:"modal-content"},this.props.children)):null}}]),a}(o.a.Component)),Fe=a(60),He=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={showModal:!1},e.toggleLike=function(){var t=e.props.poll.id;e.props.togglePollLike(t)},e.toggleDislike=function(){var t=e.props.poll.id;e.props.togglePollDislike(t)},e.deletePoll=function(){var t=e.props.poll.id;e.props.deletePoll(t,e.props.history)},e.showModal=function(){e.setState({showModal:!0})},e.closeModal=function(){e.setState({showModal:!1})},e.getNextPollId=function(){var t=e.props.polls,a=e.props.match.params.id,n=t.findIndex((function(e){return e.id===parseInt(a)}));try{return t[n+1].id}catch(o){return t[0].id}},e.getPreviousPollId=function(){var t=e.props.polls,a=e.props.match.params.id,n=t.findIndex((function(e){return e.id===parseInt(a)}));try{return t[n-1].id}catch(o){return t[t.length-1].id}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.poll?o.a.createElement("article",{className:"media content-section"},o.a.createElement("div",{className:"media-body"},o.a.createElement("div",{className:"article-metadata"},o.a.createElement("small",{className:"text-muted"},"posted by"),o.a.createElement(r.b,{to:"/users/".concat(this.props.poll.author),className:"pl-1"},this.props.poll.author),o.a.createElement("small",{className:"pl-2 text-muted"},K()(this.props.poll.date_posted).fromNow()),this.props.username===this.props.poll.author?o.a.createElement(Fe.a,{style:qe,onClick:this.showModal}):""),o.a.createElement("h2",null,this.props.poll.question_text),this.props.vote?o.a.createElement("p",null,' You selected "',this.props.vote.choice_text,'".'):"",o.a.createElement("div",{style:Be},o.a.createElement("div",{style:Ye},o.a.createElement(r.b,{className:"mr-2",to:"/polls/".concat(this.getPreviousPollId())},o.a.createElement(he.c,null))),o.a.createElement(F,{pollId:this.props.poll.id,choices:this.props.poll.choices,vote:this.props.vote}),o.a.createElement("div",{style:We},o.a.createElement(r.b,{className:"mr-2",to:"/polls/".concat(this.getNextPollId())},o.a.createElement(he.d,null)))),o.a.createElement(Ge,{showModal:this.state.showModal,closeModal:this.closeModal},o.a.createElement("h1",null,"Are you sure you want to delete this poll?"),o.a.createElement("button",{className:"btn custom-btn red-btn mb-2",onClick:this.deletePoll},"Delete")," ",o.a.createElement("button",{className:"btn custom-btn purple-btn",onClick:this.closeModal},"Cancel")),o.a.createElement("div",{className:"mb-3",style:{float:"left"}},o.a.createElement(Ve,{likes:this.props.likes,pollLiked:this.props.pollLiked,toggleLike:this.toggleLike}),o.a.createElement(ze,{dislikes:this.props.dislikes,pollDisliked:this.props.pollDisliked,toggleDislike:this.toggleDislike})),o.a.createElement(De,{pollId:this.props.poll.id}),o.a.createElement(Ke,{pollId:this.props.poll.id}))):o.a.createElement("div",null," Loading... please wait. ");return o.a.createElement(E.b.div,{initial:{opacity:0,x:"-100vh"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100vh"},transition:{transition:"linear"}},o.a.createElement(ne.a,null,o.a.createElement(oe.a,{xs:"12",md:{size:10,offset:1}},e)))}}]),a}(o.a.Component),Be={width:"100%",position:"relative"},qe={float:"right",cursor:"pointer",fontSize:"20px"},We={display:"block",fontSize:"35px",position:"absolute",right:"-80px",top:"30%",cursor:"pointer"},Ye={display:"block",fontSize:"35px",position:"absolute",left:"-75px",top:"30%",cursor:"pointer"},Je=Object(c.b)((function(e,t){var a=parseInt(t.match.params.id);return{polls:e.polls.polls,poll:e.polls.polls.find((function(e){return e.id===a})),likes:e.polls.pollsLikeCounters[a],dislikes:e.polls.pollsDislikeCounters[a],pollLiked:e.polls.pollsLiked[a],pollDisliked:e.polls.pollsDisliked[a],vote:e.polls.userVotes.find((function(e){return e.poll===a})),username:e.auth.user.username}}),{deletePoll:function(e,t){return function(a){O.delete("/polls/".concat(e,"/")).then((function(n){t.push("/"),a(y({pollDeleted:"Poll deleted!"})),a({type:"DELETE_POLL",payload:e})})).catch((function(e){return console.log(e)}))}},togglePollDislike:function(e){return function(t,a){var n=a().auth.user.id,o=a().polls,l=o.pollsLiked,s=o.pollsDisliked,r=o.pollsLikeCounters,c=o.pollsDislikeCounters,i=l[e],u=s[e];void 0===i&&void 0===u&&(O.patch("/polls/".concat(e,"/dislikes/"),{signal:"add dislike",user_id:n,dislikes:c[e]+1}).then((function(e){return console.log(e.data)})),t({type:"INCREMENT_POLL_DISLIKES",payload:e})),void 0===i&&!0===u&&(O.patch("/polls/".concat(e,"/dislikes/"),{signal:"remove dislike",user_id:n,dislikes:c[e]-1}).then((function(e){return console.log(e.data)})),t({type:"DECREMENT_POLL_DISLIKES",payload:e})),!0===i&&void 0===u&&(O.patch("/polls/".concat(e,"/dislikes/"),{signal:"add dislike, remove like",user_id:n,dislikes:c[e]+1,likes:r[e]-1}).then((function(e){return console.log(e.data)})),t({type:"DECREMENT_POLL_LIKES",payload:e}),t({type:"INCREMENT_POLL_DISLIKES",payload:e}))}},togglePollLike:function(e){return function(t,a){var n=a().auth.user.id,o=a().polls,l=o.pollsLiked,s=o.pollsDisliked,r=o.pollsLikeCounters,c=o.pollsDislikeCounters,i=l[e],u=s[e];void 0===i&&void 0===u&&(O.patch("/polls/".concat(e,"/likes/"),{signal:"add like",user_id:n,likes:r[e]+1}).then((function(e){return console.log(e.data)})),t({type:"INCREMENT_POLL_LIKES",payload:e})),!0===i&&void 0===u&&(O.patch("/polls/".concat(e,"/likes/"),{signal:"remove like",user_id:n,likes:r[e]-1}).then((function(e){return console.log(e.data)})),t({type:"DECREMENT_POLL_LIKES",payload:e})),void 0===i&&!0===u&&(O.patch("/polls/".concat(e,"/likes/"),{signal:"add like, remove dislike",user_id:n,likes:r[e]+1,dislikes:c[e]-1}).then((function(e){return console.log(e.data)})),t({type:"INCREMENT_POLL_LIKES",payload:e}),t({type:"DECREMENT_POLL_DISLIKES",payload:e}))}}})(He),Qe=a(24),$e=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={question:"",choices:[{choice_text:""},{choice_text:""}]},e.handleSubmit=function(t){t.preventDefault(),e.props.addPoll(e.state,e.props.history)},e.handleQuestion=function(t){e.setState({question:t.target.value})},e.handleChoices=function(t,a){var n=Object(Qe.a)(e.state.choices);n[a].choice_text=t.target.value,e.setState({choices:n})},e.addChoice=function(){e.setState({choices:e.state.choices.concat([{choice_text:""}])})},e.removeChoice=function(t){console.log("index:",t);var a=Object(Qe.a)(e.state.choices);a.splice(t,1),e.setState({choices:a})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(E.b.div,{initial:{opacity:0,x:"-100vh"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100vh"},transition:{transition:"linear"}},o.a.createElement(ne.a,null,o.a.createElement(oe.a,{sm:"12",md:{size:10,offset:1}},o.a.createElement("div",{className:"content-section"},o.a.createElement(le.a,{className:"poll-form",onSubmit:this.handleSubmit},o.a.createElement("legend",{className:"border-bottom mb-4"},"New Poll"),o.a.createElement(se.a,{className:"mb-4 active"},o.a.createElement("input",{className:"rounded-border",type:"text",name:"question",placeholder:"What would you like to ask?",onChange:this.handleQuestion})),this.state.choices.map((function(t,a){return o.a.createElement(se.a,{key:a,className:"mb-4"},o.a.createElement("input",{className:"rounded-border active",type:"text",name:"choice",maxLength:"20",placeholder:"Choice ".concat(a+1),onChange:function(t){return e.handleChoices(t,a)}}),o.a.createElement("span",{style:{cursor:"pointer"},className:"ml-5",onClick:function(){return e.removeChoice(a)}},"Remove"))})),o.a.createElement(se.a,null,o.a.createElement("span",{style:{cursor:"pointer"},onClick:this.addChoice},"Add another choice")),o.a.createElement(se.a,null,o.a.createElement("button",{className:"btn custom-btn purple-btn",type:"submit"},"Post")))))))}}]),a}(o.a.Component),Xe=Object(c.b)(null,{addPoll:function(e,t){return function(a,n){var o=n().auth.user.id;O.post("http://localhost:8000/api/polls/",{author:o,question_text:e.question,choices:e.choices}).then((function(e){a(y({pollCreated:"Poll created successfully!"})),a({type:"ADD_POLL",payload:e.data}),t.push("/");var o=n().polls.polls;a(j(o))})).catch((function(e){return a(k(e.response))}))}}})($e),Ze={position:N.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:N.c.SCALE},et=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.getPolls(),this.props.getUsers(),this.props.verifyCurrentUser(),console.log("user verified")}},{key:"render",value:function(){var e=this.props.location;return o.a.createElement(N.a,Object.assign({template:R},Ze),o.a.createElement(h.a,null,o.a.createElement(P,null),o.a.createElement(ae,null),o.a.createElement(E.a,{exitBeforeEnter:!0,initial:!1},o.a.createElement(d.d,{location:e,key:e.pathname},o.a.createElement(d.b,{exact:!0,path:"/register",component:me}),o.a.createElement(d.b,{exact:!0,path:"/logout",component:ue}),o.a.createElement(d.b,{exact:!0,path:"/login",component:ce}),o.a.createElement(Se,{exact:!0,path:"/users/:username",component:je}),o.a.createElement(Se,{exact:!0,path:"/polls/:id",component:Je}),o.a.createElement(Se,{exact:!0,path:"/add-poll",component:Xe}),o.a.createElement(d.b,{exact:!0,path:"/",component:X})))))}}]),a}(o.a.Component),tt=Object(c.b)(null,{getPolls:function(){return function(e,t){f.a.get("http://localhost:8000/api/polls/").then((function(a){e({type:"GET_POLLS",payload:a.data});var n=t().polls.polls;e(j(n))})).catch((function(e){return console.log(e)}))}},verifyCurrentUser:function(){return function(e,t){O.get("/current_user/").then((function(a){console.log(a),e({type:"USER_AUTHENTICATED",payload:a.data});var n=t().auth.user.id;e(C(n)),e(L(n)),e(S(n))})).catch((function(e){return console.log(e)}))}},getUsers:function(){return function(e){f.a.get("http://localhost:8000/api/users/").then((function(t){e({type:"GET_USERS",payload:t.data})})).catch((function(e){return console.log(e)}))}}})(Object(d.g)(et)),at=a(28),nt=a(61),ot=a(62),lt=a(13),st={polls:[],pollsLikeCounters:{},pollsDislikeCounters:{},pollsLiked:{},pollsDisliked:{},userVotes:[],pollLiked:!1,pollDisliked:!1},rt={comments:[],commentsLikeCounters:{},commentsDislikeCounters:{},commentsLiked:{},commentsDisliked:{}},ct={user:"",isAuthenticated:!!localStorage.getItem("accessToken")},it={users:[]},ut={},pt={message:{},status:null},mt=Object(at.combineReducers)({polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_POLLS":return Object(_.a)(Object(_.a)({},e),{},{polls:t.payload});case"SET_POLL_LIKES_AND_DISLIKES":return Object(_.a)(Object(_.a)({},e),{},{pollsLikeCounters:t.payload.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(lt.a)({},t.id,t.likes))}),{}),pollsDislikeCounters:t.payload.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(lt.a)({},t.id,t.dislikes))}),{})});case"GET_USER_VOTES":return Object(_.a)(Object(_.a)({},e),{},{userVotes:t.payload});case"GET_USER_LIKES":return Object(_.a)(Object(_.a)({},e),{},{pollsLiked:t.payload.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(lt.a)({},t.poll,!0))}),{})});case"GET_USER_DISLIKES":return Object(_.a)(Object(_.a)({},e),{},{pollsDisliked:t.payload.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(lt.a)({},t.poll,!0))}),{})});case"REMOVE_USER_VOTES":return Object(_.a)(Object(_.a)({},e),{},{userVotes:[]});case"REMOVE_USER_LIKES":return Object(_.a)(Object(_.a)({},e),{},{pollsLiked:{}});case"REMOVE_USER_DISLIKES":return Object(_.a)(Object(_.a)({},e),{},{pollsDisliked:{}});case"DELETE_POLL":return Object(_.a)(Object(_.a)({},e),{},{polls:Object(Qe.a)(e.polls.filter((function(e){return e.id!==t.payload})))});case"ADD_POLL":return Object(_.a)(Object(_.a)({},e),{},{polls:[t.payload].concat(Object(Qe.a)(e.polls))});case"HANDLE_VOTE":return Object(_.a)(Object(_.a)({},e),{},{polls:e.polls.map((function(e){return e.id===t.payload.poll.id?t.payload.poll:e})),userVotes:[t.payload.vote].concat(Object(Qe.a)(e.userVotes))});case"INCREMENT_POLL_LIKES":return Object(_.a)(Object(_.a)({},e),{},{pollsLikeCounters:Object(_.a)(Object(_.a)({},e.pollsLikeCounters),{},Object(lt.a)({},t.payload,e.pollsLikeCounters[t.payload]+1)),pollsLiked:Object(_.a)(Object(_.a)({},e.pollsLiked),{},Object(lt.a)({},t.payload,!0))});case"DECREMENT_POLL_LIKES":return Object(_.a)(Object(_.a)({},e),{},{pollsLikeCounters:Object(_.a)(Object(_.a)({},e.pollsLikeCounters),{},Object(lt.a)({},t.payload,e.pollsLikeCounters[t.payload]-1)),pollsLiked:Object(_.a)(Object(_.a)({},e.pollsLiked),{},Object(lt.a)({},t.payload,void 0))});case"INCREMENT_POLL_DISLIKES":return Object(_.a)(Object(_.a)({},e),{},{pollsDislikeCounters:Object(_.a)(Object(_.a)({},e.pollsDislikeCounters),{},Object(lt.a)({},t.payload,e.pollsDislikeCounters[t.payload]+1)),pollsDisliked:Object(_.a)(Object(_.a)({},e.pollsDisliked),{},Object(lt.a)({},t.payload,!0))});case"DECREMENT_POLL_DISLIKES":return Object(_.a)(Object(_.a)({},e),{},{pollsDislikeCounters:Object(_.a)(Object(_.a)({},e.pollsDislikeCounters),{},Object(lt.a)({},t.payload,e.pollsDislikeCounters[t.payload]-1)),pollsDisliked:Object(_.a)(Object(_.a)({},e.pollsDisliked),{},Object(lt.a)({},t.payload,void 0))});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_COMMENTS":var a=t.payload;return Object(_.a)(Object(_.a)({},e),{},{comments:a});case"SET_COMMENT_LIKES_AND_DISLIKES":return Object(_.a)(Object(_.a)({},e),{},{commentsLikeCounters:t.payload.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(lt.a)({},t.id,t.likes))}),{}),commentsDislikeCounters:t.payload.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(lt.a)({},t.id,t.dislikes))}),{})});case"ADD_COMMENT":return Object(_.a)(Object(_.a)({},e),{},{comments:[t.payload].concat(Object(Qe.a)(e.comments))});case"GET_USER_COMMENT_LIKES":return Object(_.a)(Object(_.a)({},e),{},{commentsLiked:t.payload.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(lt.a)({},t.comment,!0))}),{})});case"GET_USER_COMMENT_DISLIKES":return Object(_.a)(Object(_.a)({},e),{},{commentsDisliked:t.payload.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(lt.a)({},t.comment,!0))}),{})});case"INCREMENT_COMMENT_LIKES":return Object(_.a)(Object(_.a)({},e),{},{commentsLikeCounters:Object(_.a)(Object(_.a)({},e.commentsLikeCounters),{},Object(lt.a)({},t.payload,e.commentsLikeCounters[t.payload]+1)),commentsLiked:Object(_.a)(Object(_.a)({},e.commentsLiked),{},Object(lt.a)({},t.payload,!0))});case"DECREMENT_COMMENT_LIKES":return Object(_.a)(Object(_.a)({},e),{},{commentsLikeCounters:Object(_.a)(Object(_.a)({},e.commentsLikeCounters),{},Object(lt.a)({},t.payload,e.commentsLikeCounters[t.payload]-1)),commentsLiked:Object(_.a)(Object(_.a)({},e.commentsLiked),{},Object(lt.a)({},t.payload,void 0))});case"INCREMENT_COMMENT_DISLIKES":return Object(_.a)(Object(_.a)({},e),{},{commentsDislikeCounters:Object(_.a)(Object(_.a)({},e.commentsDislikeCounters),{},Object(lt.a)({},t.payload,e.commentsDislikeCounters[t.payload]+1)),commentsDisliked:Object(_.a)(Object(_.a)({},e.commentsDisliked),{},Object(lt.a)({},t.payload,!0))});case"DECREMENT_COMMENT_DISLIKES":return Object(_.a)(Object(_.a)({},e),{},{commentsDislikeCounters:Object(_.a)(Object(_.a)({},e.commentsDislikeCounters),{},Object(lt.a)({},t.payload,e.commentsDislikeCounters[t.payload]-1)),commentsDisliked:Object(_.a)(Object(_.a)({},e.commentsDisliked),{},Object(lt.a)({},t.payload,void 0))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_AUTHENTICATED":case"HANDLE_LOGIN":return Object(_.a)(Object(_.a)({},e),{},{isAuthenticated:!0,user:t.payload});case"HANDLE_LOGOUT":return Object(_.a)(Object(_.a)({},e),{},{isAuthenticated:!1,user:""});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return Object(_.a)(Object(_.a)({},e),{},{users:t.payload});case"ADD_NEW_USER":return Object(_.a)(Object(_.a)({},e),{},{users:[t.payload].concat(Object(Qe.a)(e.users))});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MESSAGE":return t.payload;default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return Object(_.a)(Object(_.a)({},e),{},{message:t.payload.data,status:t.payload.status});default:return e}}}),dt=[ot.a],ht=Object(at.createStore)(mt,{},Object(nt.composeWithDevTools)(at.applyMiddleware.apply(void 0,dt)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(r.a,null,o.a.createElement(c.a,{store:ht},o.a.createElement(tt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){e.exports=a(108)},67:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},97:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.624b7ae5.chunk.js.map